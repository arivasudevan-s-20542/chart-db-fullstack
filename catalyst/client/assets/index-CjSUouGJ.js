import{Z as w}from"./index-DY4lwpwP.js";var it="vercel.ai.error",Rr=Symbol.for(it),ut,Dr=class ct extends Error{constructor({name:t,message:r,cause:n}){super(r),this[ut]=!0,this.name=t,this.cause=n}static isInstance(t){return ct.hasMarker(t,it)}static hasMarker(t,r){const n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};ut=Rr;var I=Dr,lt="AI_APICallError",pt=`vercel.ai.error.${lt}`,Cr=Symbol.for(pt),ft,A=class extends I{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:s,cause:a,isRetryable:i=n!=null&&(n===408||n===409||n===429||n>=500),data:c}){super({name:lt,message:e,cause:a}),this[ft]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=s,this.isRetryable=i,this.data=c}static isInstance(e){return I.hasMarker(e,pt)}};ft=Cr;var dt="AI_EmptyResponseBodyError",mt=`vercel.ai.error.${dt}`,Fr=Symbol.for(mt),ht,Lr=class extends I{constructor({message:e="Empty response body"}={}){super({name:dt,message:e}),this[ht]=!0}static isInstance(e){return I.hasMarker(e,mt)}};ht=Fr;function vt(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var gt="AI_InvalidArgumentError",yt=`vercel.ai.error.${gt}`,Ur=Symbol.for(yt),_t,bt=class extends I{constructor({message:e,cause:t,argument:r}){super({name:gt,message:e,cause:t}),this[_t]=!0,this.argument=r}static isInstance(e){return I.hasMarker(e,yt)}};_t=Ur;var wt="AI_InvalidPromptError",kt=`vercel.ai.error.${wt}`,Mr=Symbol.for(kt),$t,_u=class extends I{constructor({prompt:e,message:t,cause:r}){super({name:wt,message:`Invalid prompt: ${t}`,cause:r}),this[$t]=!0,this.prompt=e}static isInstance(e){return I.hasMarker(e,kt)}};$t=Mr;var zt="AI_InvalidResponseDataError",Zt=`vercel.ai.error.${zt}`,Vr=Symbol.for(Zt),Et,bu=class extends I{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:zt,message:t}),this[Et]=!0,this.data=e}static isInstance(e){return I.hasMarker(e,Zt)}};Et=Vr;var It="AI_JSONParseError",St=`vercel.ai.error.${It}`,Jr=Symbol.for(St),Pt,se=class extends I{constructor({text:e,cause:t}){super({name:It,message:`JSON parsing failed: Text: ${e}.
Error message: ${vt(t)}`,cause:t}),this[Pt]=!0,this.text=e}static isInstance(e){return I.hasMarker(e,St)}};Pt=Jr;var Ot="AI_LoadAPIKeyError",xt=`vercel.ai.error.${Ot}`,Br=Symbol.for(xt),Tt,ee=class extends I{constructor({message:e}){super({name:Ot,message:e}),this[Tt]=!0}static isInstance(e){return I.hasMarker(e,xt)}};Tt=Br;var At="AI_LoadSettingError",Nt=`vercel.ai.error.${At}`,Wr=Symbol.for(Nt),jt,wu=class extends I{constructor({message:e}){super({name:At,message:e}),this[jt]=!0}static isInstance(e){return I.hasMarker(e,Nt)}};jt=Wr;var Rt="AI_NoContentGeneratedError",Dt=`vercel.ai.error.${Rt}`,Gr=Symbol.for(Dt),Ct,ku=class extends I{constructor({message:e="No content generated."}={}){super({name:Rt,message:e}),this[Ct]=!0}static isInstance(e){return I.hasMarker(e,Dt)}};Ct=Gr;var Ft="AI_NoSuchModelError",Lt=`vercel.ai.error.${Ft}`,Hr=Symbol.for(Lt),Ut,$u=class extends I{constructor({errorName:e=Ft,modelId:t,modelType:r,message:n=`No such ${r}: ${t}`}){super({name:e,message:n}),this[Ut]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return I.hasMarker(e,Lt)}};Ut=Hr;var Mt="AI_TooManyEmbeddingValuesForCallError",Vt=`vercel.ai.error.${Mt}`,Kr=Symbol.for(Vt),Jt,zu=class extends I{constructor(e){super({name:Mt,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Jt]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return I.hasMarker(e,Vt)}};Jt=Kr;var Bt="AI_TypeValidationError",Wt=`vercel.ai.error.${Bt}`,qr=Symbol.for(Wt),Gt,Yr=class _e extends I{constructor({value:t,cause:r}){super({name:Bt,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${vt(r)}`,cause:r}),this[Gt]=!0,this.value=t}static isInstance(t){return I.hasMarker(t,Wt)}static wrap({value:t,cause:r}){return _e.isInstance(r)&&r.value===t?r:new _e({value:t,cause:r})}};Gt=qr;var G=Yr,Ht="AI_UnsupportedFunctionalityError",Kt=`vercel.ai.error.${Ht}`,Xr=Symbol.for(Kt),qt,Zu=class extends I{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Ht,message:t}),this[qt]=!0,this.functionality=e}static isInstance(e){return I.hasMarker(e,Kt)}};qt=Xr;function ae(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(ae):typeof e=="object"?Object.entries(e).every(([t,r])=>typeof t=="string"&&ae(r)):!1}function Eu(e){return Array.isArray(e)&&e.every(ae)}function Iu(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&ae(r))}class je extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function me(e){}function Qr(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=me,onError:r=me,onRetry:n=me,onComment:o}=e;let s="",a=!0,i,c="",p="";function h(d){const m=a?d.replace(/^\xEF\xBB\xBF/,""):d,[k,_]=en(`${s}${m}`);for(const b of k)f(b);s=_,a=!1}function f(d){if(d===""){v();return}if(d.startsWith(":")){o&&o(d.slice(d.startsWith(": ")?2:1));return}const m=d.indexOf(":");if(m!==-1){const k=d.slice(0,m),_=d[m+1]===" "?2:1,b=d.slice(m+_);y(k,b,d);return}y(d,"",d)}function y(d,m,k){switch(d){case"event":p=m;break;case"data":c=`${c}${m}
`;break;case"id":i=m.includes("\0")?void 0:m;break;case"retry":/^\d+$/.test(m)?n(parseInt(m,10)):r(new je(`Invalid \`retry\` value: "${m}"`,{type:"invalid-retry",value:m,line:k}));break;default:r(new je(`Unknown field "${d.length>20?`${d.slice(0,20)}â€¦`:d}"`,{type:"unknown-field",field:d,value:m,line:k}));break}}function v(){c.length>0&&t({id:i,event:p||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),i=void 0,c="",p=""}function l(d={}){s&&d.consume&&f(s),a=!0,i=void 0,c="",p="",s=""}return{feed:h,reset:l}}function en(e){const t=[];let r="",n=0;for(;n<e.length;){const o=e.indexOf("\r",n),s=e.indexOf(`
`,n);let a=-1;if(o!==-1&&s!==-1?a=Math.min(o,s):o!==-1?o===e.length-1?a=-1:a=o:s!==-1&&(a=s),a===-1){r=e.slice(n);break}else{const i=e.slice(n,a);t.push(i),n=a+1,e[n-1]==="\r"&&e[n]===`
`&&n++}}return[t,r]}class tn extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let o;super({start(s){o=Qr({onEvent:a=>{s.enqueue(a)},onError(a){t==="terminate"?s.error(a):typeof t=="function"&&t(a)},onRetry:r,onComment:n})},transform(s){o.feed(s)}})}}function u(e,t,r){function n(i,c){var p;Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(p=i._zod).traits??(p.traits=new Set),i._zod.traits.add(e),t(i,c);for(const h in a.prototype)h in i||Object.defineProperty(i,h,{value:a.prototype[h].bind(i)});i._zod.constr=a,i._zod.def=c}const o=r?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function a(i){var c;const p=r?.Parent?new s:this;n(p,i),(c=p._zod).deferred??(c.deferred=[]);for(const h of p._zod.deferred)h();return p}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>r?.Parent&&i instanceof r.Parent?!0:i?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class H extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Yt={};function C(e){return Yt}function Xt(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,o])=>t.indexOf(+n)===-1).map(([n,o])=>o)}function rn(e,t){return typeof t=="bigint"?t.toString():t}function ze(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ze(e){return e==null}function Ee(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function nn(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n,s=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return s%a/10**o}function z(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function pe(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function J(e){return JSON.stringify(e)}const Qt=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ie(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const on=ze(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function ue(e){if(ie(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(ie(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const sn=new Set(["string","number","symbol"]);function Y(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function g(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function an(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const un={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function cn(e,t){const r={},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=n.shape[o])}return M(e,{...e._zod.def,shape:r,checks:[]})}function ln(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete r[o]}return M(e,{...e._zod.def,shape:r,checks:[]})}function pn(e,t){if(!ue(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return pe(this,"shape",n),n},checks:[]};return M(e,r)}function fn(e,t){return M(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return pe(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function dn(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=e?new e({type:"optional",innerType:n[s]}):n[s])}else for(const s in n)o[s]=e?new e({type:"optional",innerType:n[s]}):n[s];return M(t,{...t._zod.def,shape:o,checks:[]})}function mn(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const s in r){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=new e({type:"nonoptional",innerType:n[s]}))}else for(const s in n)o[s]=new e({type:"nonoptional",innerType:n[s]});return M(t,{...t._zod.def,shape:o,checks:[]})}function W(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function U(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function te(e){return typeof e=="string"?e:e?.message}function F(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const o=te(e.inst?._zod.def?.error?.(e))??te(t?.error?.(e))??te(r.customError?.(e))??te(r.localeError?.(e))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Ie(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function K(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const er=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,rn,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tr=u("$ZodError",er),rr=u("$ZodError",er,{Parent:Error});function hn(e,t=r=>r.message){const r={},n=[];for(const o of e.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):n.push(t(o));return{formErrors:n,fieldErrors:r}}function vn(e,t){const r=t||function(s){return s.message},n={_errors:[]},o=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(i=>o({issues:i}));else if(a.code==="invalid_key")o({issues:a.issues});else if(a.code==="invalid_element")o({issues:a.issues});else if(a.path.length===0)n._errors.push(r(a));else{let i=n,c=0;for(;c<a.path.length;){const p=a.path[c];c===a.path.length-1?(i[p]=i[p]||{_errors:[]},i[p]._errors.push(r(a))):i[p]=i[p]||{_errors:[]},i=i[p],c++}}};return o(e),n}const gn=e=>(t,r,n,o)=>{const s=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new H;if(a.issues.length){const i=new(o?.Err??e)(a.issues.map(c=>F(c,s,C())));throw Qt(i,o?.callee),i}return a.value},yn=e=>async(t,r,n,o)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new(o?.Err??e)(a.issues.map(c=>F(c,s,C())));throw Qt(i,o?.callee),i}return a.value},nr=e=>(t,r,n)=>{const o=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new H;return s.issues.length?{success:!1,error:new(e??tr)(s.issues.map(a=>F(a,o,C())))}:{success:!0,data:s.value}},_n=nr(rr),or=e=>async(t,r,n)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(a=>F(a,o,C())))}:{success:!0,data:s.value}},bn=or(rr),wn=/^[cC][^\s-]{8,}$/,kn=/^[0-9a-z]+$/,$n=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,zn=/^[0-9a-vA-V]{20}$/,Zn=/^[A-Za-z0-9]{27}$/,En=/^[a-zA-Z0-9_-]{21}$/,In=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Sn=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Re=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Pn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,On="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xn(){return new RegExp(On,"u")}const Tn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,An=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Nn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,jn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,sr=/^[A-Za-z0-9_-]*$/,Dn=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Cn=/^\+(?:[0-9]){6,14}[0-9]$/,ar="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Fn=new RegExp(`^${ar}$`);function ir(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ln(e){return new RegExp(`^${ir(e)}$`)}function Un(e){const t=ir({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ar}T(?:${n})$`)}const Mn=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Vn=/^\d+$/,Jn=/^-?\d+(?:\.\d+)?/i,Bn=/true|false/i,Wn=/null/i,Gn=/^[^A-Z]*$/,Hn=/^[^a-z]*$/,N=u("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ur={number:"number",bigint:"bigint",object:"date"},cr=u("$ZodCheckLessThan",(e,t)=>{N.init(e,t);const r=ur[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),lr=u("$ZodCheckGreaterThan",(e,t)=>{N.init(e,t);const r=ur[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Kn=u("$ZodCheckMultipleOf",(e,t)=>{N.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):nn(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),qn=u("$ZodCheckNumberFormat",(e,t)=>{N.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[o,s]=un[t.format];e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,i.minimum=o,i.maximum=s,r&&(i.pattern=Vn)}),e._zod.check=a=>{const i=a.value;if(r){if(!Number.isInteger(i)){a.issues.push({expected:n,format:t.format,code:"invalid_type",input:i,inst:e});return}if(!Number.isSafeInteger(i)){i>0?a.issues.push({input:i,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:i,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}i<o&&a.issues.push({origin:"number",input:i,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),i>s&&a.issues.push({origin:"number",input:i,code:"too_big",maximum:s,inst:e})}}),Yn=u("$ZodCheckMaxLength",(e,t)=>{var r;N.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Ze(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const o=n.value;if(o.length<=t.maximum)return;const a=Ie(o);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Xn=u("$ZodCheckMinLength",(e,t)=>{var r;N.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Ze(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const o=n.value;if(o.length>=t.minimum)return;const a=Ie(o);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Qn=u("$ZodCheckLengthEquals",(e,t)=>{var r;N.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Ze(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=n=>{const o=n.value,s=o.length;if(s===t.length)return;const a=Ie(o),i=s>t.length;n.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),fe=u("$ZodCheckStringFormat",(e,t)=>{var r,n;N.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),eo=u("$ZodCheckRegex",(e,t)=>{fe.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),to=u("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Gn),fe.init(e,t)}),ro=u("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Hn),fe.init(e,t)}),no=u("$ZodCheckIncludes",(e,t)=>{N.init(e,t);const r=Y(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),oo=u("$ZodCheckStartsWith",(e,t)=>{N.init(e,t);const r=new RegExp(`^${Y(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),so=u("$ZodCheckEndsWith",(e,t)=>{N.init(e,t);const r=new RegExp(`.*${Y(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ao=u("$ZodCheckOverwrite",(e,t)=>{N.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class io{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),s=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const t=Function,r=this?.args,o=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...r,o.join(`
`))}}const uo={major:4,minor:0,patch:0},E=u("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=uo;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const s of o._zod.onattach)s(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(s,a,i)=>{let c=W(s),p;for(const h of a){if(h._zod.def.when){if(!h._zod.def.when(s))continue}else if(c)continue;const f=s.issues.length,y=h._zod.check(s);if(y instanceof Promise&&i?.async===!1)throw new H;if(p||y instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await y,s.issues.length!==f&&(c||(c=W(s,f)))});else{if(s.issues.length===f)continue;c||(c=W(s,f))}}return p?p.then(()=>s):s};e._zod.run=(s,a)=>{const i=e._zod.parse(s,a);if(i instanceof Promise){if(a.async===!1)throw new H;return i.then(c=>o(c,n,a))}return o(i,n,a)}}e["~standard"]={validate:o=>{try{const s=_n(e,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return bn(e,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Se=u("$ZodString",(e,t)=>{E.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Mn(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),P=u("$ZodStringFormat",(e,t)=>{fe.init(e,t),Se.init(e,t)}),co=u("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Sn),P.init(e,t)}),lo=u("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Re(n))}else t.pattern??(t.pattern=Re());P.init(e,t)}),po=u("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Pn),P.init(e,t)}),fo=u("$ZodURL",(e,t)=>{P.init(e,t),e._zod.check=r=>{try{const n=r.value,o=new URL(n),s=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Dn.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&s.endsWith("/")?r.value=s.slice(0,-1):r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),mo=u("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=xn()),P.init(e,t)}),ho=u("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=En),P.init(e,t)}),vo=u("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=wn),P.init(e,t)}),go=u("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=kn),P.init(e,t)}),yo=u("$ZodULID",(e,t)=>{t.pattern??(t.pattern=$n),P.init(e,t)}),_o=u("$ZodXID",(e,t)=>{t.pattern??(t.pattern=zn),P.init(e,t)}),bo=u("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Zn),P.init(e,t)}),wo=u("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Un(t)),P.init(e,t)}),ko=u("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Fn),P.init(e,t)}),$o=u("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ln(t)),P.init(e,t)}),zo=u("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=In),P.init(e,t)}),Zo=u("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Tn),P.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Eo=u("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=An),P.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Io=u("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Nn),P.init(e,t)}),So=u("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=jn),P.init(e,t),e._zod.check=r=>{const[n,o]=r.value.split("/");try{if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function pr(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Po=u("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Rn),P.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{pr(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Oo(e){if(!sr.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return pr(r)}const xo=u("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=sr),P.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Oo(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),To=u("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Cn),P.init(e,t)});function Ao(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const No=u("$ZodJWT",(e,t)=>{P.init(e,t),e._zod.check=r=>{Ao(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),fr=u("$ZodNumber",(e,t)=>{E.init(e,t),e._zod.pattern=e._zod.bag.pattern??Jn,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),r}}),jo=u("$ZodNumber",(e,t)=>{qn.init(e,t),fr.init(e,t)}),Ro=u("$ZodBoolean",(e,t)=>{E.init(e,t),e._zod.pattern=Bn,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),Do=u("$ZodNull",(e,t)=>{E.init(e,t),e._zod.pattern=Wn,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),r}}),Co=u("$ZodAny",(e,t)=>{E.init(e,t),e._zod.parse=r=>r}),Fo=u("$ZodUnknown",(e,t)=>{E.init(e,t),e._zod.parse=r=>r}),Lo=u("$ZodNever",(e,t)=>{E.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function De(e,t,r){e.issues.length&&t.issues.push(...U(r,e.issues)),t.value[r]=e.value}const Uo=u("$ZodArray",(e,t)=>{E.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);const s=[];for(let a=0;a<o.length;a++){const i=o[a],c=t.element._zod.run({value:i,issues:[]},n);c instanceof Promise?s.push(c.then(p=>De(p,r,a))):De(c,r,a)}return s.length?Promise.all(s).then(()=>r):r}});function re(e,t,r){e.issues.length&&t.issues.push(...U(r,e.issues)),t.value[r]=e.value}function Ce(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...U(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Mo=u("$ZodObject",(e,t)=>{E.init(e,t);const r=ze(()=>{const f=Object.keys(t.shape);for(const v of f)if(!(t.shape[v]instanceof E))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const y=an(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(y)}});z(e._zod,"propValues",()=>{const f=t.shape,y={};for(const v in f){const l=f[v]._zod;if(l.values){y[v]??(y[v]=new Set);for(const d of l.values)y[v].add(d)}}return y});const n=f=>{const y=new io(["shape","payload","ctx"]),v=r.value,l=_=>{const b=J(_);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};y.write("const input = payload.value;");const d=Object.create(null);let m=0;for(const _ of v.keys)d[_]=`key_${m++}`;y.write("const newResult = {}");for(const _ of v.keys)if(v.optionalKeys.has(_)){const b=d[_];y.write(`const ${b} = ${l(_)};`);const $=J(_);y.write(`
        if (${b}.issues.length) {
          if (input[${$}] === undefined) {
            if (${$} in input) {
              newResult[${$}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${b}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${$}, ...iss.path] : [${$}],
              }))
            );
          }
        } else if (${b}.value === undefined) {
          if (${$} in input) newResult[${$}] = undefined;
        } else {
          newResult[${$}] = ${b}.value;
        }
        `)}else{const b=d[_];y.write(`const ${b} = ${l(_)};`),y.write(`
          if (${b}.issues.length) payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${J(_)}, ...iss.path] : [${J(_)}]
          })));`),y.write(`newResult[${J(_)}] = ${b}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const k=y.compile();return(_,b)=>k(f,_,b)};let o;const s=ie,a=!Yt.jitless,c=a&&on.value,p=t.catchall;let h;e._zod.parse=(f,y)=>{h??(h=r.value);const v=f.value;if(!s(v))return f.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),f;const l=[];if(a&&c&&y?.async===!1&&y.jitless!==!0)o||(o=n(t.shape)),f=o(f,y);else{f.value={};const b=h.shape;for(const $ of h.keys){const L=b[$],Q=L._zod.run({value:v[$],issues:[]},y),Ae=L._zod.optin==="optional"&&L._zod.optout==="optional";Q instanceof Promise?l.push(Q.then(Ne=>Ae?Ce(Ne,f,$,v):re(Ne,f,$))):Ae?Ce(Q,f,$,v):re(Q,f,$)}}if(!p)return l.length?Promise.all(l).then(()=>f):f;const d=[],m=h.keySet,k=p._zod,_=k.def.type;for(const b of Object.keys(v)){if(m.has(b))continue;if(_==="never"){d.push(b);continue}const $=k.run({value:v[b],issues:[]},y);$ instanceof Promise?l.push($.then(L=>re(L,f,b))):re($,f,b)}return d.length&&f.issues.push({code:"unrecognized_keys",keys:d,input:v,inst:e}),l.length?Promise.all(l).then(()=>f):f}});function Fe(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(s=>F(s,n,C())))}),t}const dr=u("$ZodUnion",(e,t)=>{E.init(e,t),z(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),z(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),z(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),z(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Ee(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let o=!1;const s=[];for(const a of t.options){const i=a._zod.run({value:r.value,issues:[]},n);if(i instanceof Promise)s.push(i),o=!0;else{if(i.issues.length===0)return i;s.push(i)}}return o?Promise.all(s).then(a=>Fe(a,r,e,n)):Fe(s,r,e,n)}}),Vo=u("$ZodDiscriminatedUnion",(e,t)=>{dr.init(e,t);const r=e._zod.parse;z(e._zod,"propValues",()=>{const o={};for(const s of t.options){const a=s._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const[i,c]of Object.entries(a)){o[i]||(o[i]=new Set);for(const p of c)o[i].add(p)}}return o});const n=ze(()=>{const o=t.options,s=new Map;for(const a of o){const i=a._zod.propValues[t.discriminator];if(!i||i.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(const c of i){if(s.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);s.set(c,a)}}return s});e._zod.parse=(o,s)=>{const a=o.value;if(!ie(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),o;const i=n.value.get(a?.[t.discriminator]);return i?i._zod.run(o,s):t.unionFallback?r(o,s):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:a,path:[t.discriminator],inst:e}),o)}}),Jo=u("$ZodIntersection",(e,t)=>{E.init(e,t),e._zod.parse=(r,n)=>{const o=r.value,s=t.left._zod.run({value:o,issues:[]},n),a=t.right._zod.run({value:o,issues:[]},n);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([c,p])=>Le(r,c,p)):Le(r,s,a)}});function be(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ue(e)&&ue(t)){const r=Object.keys(t),n=Object.keys(e).filter(s=>r.indexOf(s)!==-1),o={...e,...t};for(const s of n){const a=be(e[s],t[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};o[s]=a.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const o=e[n],s=t[n],a=be(o,s);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Le(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),W(e))return e;const n=be(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Bo=u("$ZodRecord",(e,t)=>{E.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!ue(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;const s=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;r.value={};for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const p=t.valueType._zod.run({value:o[c],issues:[]},n);p instanceof Promise?s.push(p.then(h=>{h.issues.length&&r.issues.push(...U(c,h.issues)),r.value[c]=h.value})):(p.issues.length&&r.issues.push(...U(c,p.issues)),r.value[c]=p.value)}let i;for(const c in o)a.has(c)||(i=i??[],i.push(c));i&&i.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:i})}else{r.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;const i=t.keyType._zod.run({value:a,issues:[]},n);if(i instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(i.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:i.issues.map(p=>F(p,n,C())),input:a,path:[a],inst:e}),r.value[i.value]=i.value;continue}const c=t.valueType._zod.run({value:o[a],issues:[]},n);c instanceof Promise?s.push(c.then(p=>{p.issues.length&&r.issues.push(...U(a,p.issues)),r.value[i.value]=p.value})):(c.issues.length&&r.issues.push(...U(a,c.issues)),r.value[i.value]=c.value)}}return s.length?Promise.all(s).then(()=>r):r}}),Wo=u("$ZodEnum",(e,t)=>{E.init(e,t);const r=Xt(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>sn.has(typeof n)).map(n=>typeof n=="string"?Y(n):n.toString()).join("|")})$`),e._zod.parse=(n,o)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:e}),n}}),Go=u("$ZodLiteral",(e,t)=>{E.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Y(r):r?r.toString():String(r)).join("|")})$`),e._zod.parse=(r,n)=>{const o=r.value;return e._zod.values.has(o)||r.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),r}}),Ho=u("$ZodTransform",(e,t)=>{E.init(e,t),e._zod.parse=(r,n)=>{const o=t.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new H;return r.value=o,r}}),Ko=u("$ZodOptional",(e,t)=>{E.init(e,t),e._zod.optin="optional",e._zod.optout="optional",z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ee(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),qo=u("$ZodNullable",(e,t)=>{E.init(e,t),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ee(r.source)}|null)$`):void 0}),z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Yo=u("$ZodDefault",(e,t)=>{E.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>Ue(s,t)):Ue(o,t)}});function Ue(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Xo=u("$ZodPrefault",(e,t)=>{E.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Qo=u("$ZodNonOptional",(e,t)=>{E.init(e,t),z(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>Me(s,e)):Me(o,e)}});function Me(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const es=u("$ZodCatch",(e,t)=>{E.init(e,t),e._zod.optin="optional",z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(a=>F(a,n,C()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(s=>F(s,n,C()))},input:r.value}),r.issues=[]),r)}}),ts=u("$ZodPipe",(e,t)=>{E.init(e,t),z(e._zod,"values",()=>t.in._zod.values),z(e._zod,"optin",()=>t.in._zod.optin),z(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const o=t.in._zod.run(r,n);return o instanceof Promise?o.then(s=>Ve(s,t,n)):Ve(o,t,n)}});function Ve(e,t,r){return W(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const rs=u("$ZodReadonly",(e,t)=>{E.init(e,t),z(e._zod,"propValues",()=>t.innerType._zod.propValues),z(e._zod,"values",()=>t.innerType._zod.values),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(Je):Je(o)}});function Je(e){return e.value=Object.freeze(e.value),e}const ns=u("$ZodLazy",(e,t)=>{E.init(e,t),z(e._zod,"innerType",()=>t.getter()),z(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),z(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),z(e._zod,"optin",()=>e._zod.innerType._zod.optin),z(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)}),os=u("$ZodCustom",(e,t)=>{N.init(e,t),E.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,o=t.fn(n);if(o instanceof Promise)return o.then(s=>Be(s,r,n,e));Be(o,r,n,e)}});function Be(e,t,r,n){if(!e){const o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),t.issues.push(K(o))}}class mr{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function ss(){return new mr}const B=ss();function as(e,t){return new e({type:"string",...g(t)})}function is(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...g(t)})}function We(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...g(t)})}function us(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...g(t)})}function cs(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...g(t)})}function ls(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...g(t)})}function ps(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...g(t)})}function fs(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...g(t)})}function ds(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...g(t)})}function ms(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...g(t)})}function hs(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...g(t)})}function vs(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...g(t)})}function gs(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...g(t)})}function ys(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...g(t)})}function _s(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...g(t)})}function bs(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...g(t)})}function ws(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...g(t)})}function ks(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...g(t)})}function $s(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...g(t)})}function zs(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...g(t)})}function Zs(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...g(t)})}function Es(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...g(t)})}function Is(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...g(t)})}function Ss(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...g(t)})}function Ps(e,t){return new e({type:"string",format:"date",check:"string_format",...g(t)})}function Os(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...g(t)})}function xs(e,t){return new e({type:"string",format:"duration",check:"string_format",...g(t)})}function Ts(e,t){return new e({type:"number",checks:[],...g(t)})}function Su(e,t){return new e({type:"number",coerce:!0,checks:[],...g(t)})}function As(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...g(t)})}function Ns(e,t){return new e({type:"boolean",...g(t)})}function js(e,t){return new e({type:"null",...g(t)})}function Rs(e){return new e({type:"any"})}function Ds(e){return new e({type:"unknown"})}function Cs(e,t){return new e({type:"never",...g(t)})}function Ge(e,t){return new cr({check:"less_than",...g(t),value:e,inclusive:!1})}function he(e,t){return new cr({check:"less_than",...g(t),value:e,inclusive:!0})}function He(e,t){return new lr({check:"greater_than",...g(t),value:e,inclusive:!1})}function ve(e,t){return new lr({check:"greater_than",...g(t),value:e,inclusive:!0})}function Ke(e,t){return new Kn({check:"multiple_of",...g(t),value:e})}function hr(e,t){return new Yn({check:"max_length",...g(t),maximum:e})}function ce(e,t){return new Xn({check:"min_length",...g(t),minimum:e})}function vr(e,t){return new Qn({check:"length_equals",...g(t),length:e})}function Fs(e,t){return new eo({check:"string_format",format:"regex",...g(t),pattern:e})}function Ls(e){return new to({check:"string_format",format:"lowercase",...g(e)})}function Us(e){return new ro({check:"string_format",format:"uppercase",...g(e)})}function Ms(e,t){return new no({check:"string_format",format:"includes",...g(t),includes:e})}function Vs(e,t){return new oo({check:"string_format",format:"starts_with",...g(t),prefix:e})}function Js(e,t){return new so({check:"string_format",format:"ends_with",...g(t),suffix:e})}function X(e){return new ao({check:"overwrite",tx:e})}function Bs(e){return X(t=>t.normalize(e))}function Ws(){return X(e=>e.trim())}function Gs(){return X(e=>e.toLowerCase())}function Hs(){return X(e=>e.toUpperCase())}function Ks(e,t,r){return new e({type:"array",element:t,...g(r)})}function qs(e,t,r){const n=g(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function Ys(e,t,r){return new e({type:"custom",check:"custom",fn:t,...g(r)})}class qe{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??B,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;const o=t._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(t);if(a)return a.count++,r.schemaPath.includes(t)&&(a.cycle=r.path),a.schema;const i={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,i);const c=t._zod.toJSONSchema?.();if(c)i.schema=c;else{const f={...r,schemaPath:[...r.schemaPath,t],path:r.path},y=t._zod.parent;if(y)i.ref=y,this.process(y,f),this.seen.get(y).isParent=!0;else{const v=i.schema;switch(o.type){case"string":{const l=v;l.type="string";const{minimum:d,maximum:m,format:k,patterns:_,contentEncoding:b}=t._zod.bag;if(typeof d=="number"&&(l.minLength=d),typeof m=="number"&&(l.maxLength=m),k&&(l.format=s[k]??k,l.format===""&&delete l.format),b&&(l.contentEncoding=b),_&&_.size>0){const $=[..._];$.length===1?l.pattern=$[0].source:$.length>1&&(i.schema.allOf=[...$.map(L=>({...this.target==="draft-7"?{type:"string"}:{},pattern:L.source}))])}break}case"number":{const l=v,{minimum:d,maximum:m,format:k,multipleOf:_,exclusiveMaximum:b,exclusiveMinimum:$}=t._zod.bag;typeof k=="string"&&k.includes("int")?l.type="integer":l.type="number",typeof $=="number"&&(l.exclusiveMinimum=$),typeof d=="number"&&(l.minimum=d,typeof $=="number"&&($>=d?delete l.minimum:delete l.exclusiveMinimum)),typeof b=="number"&&(l.exclusiveMaximum=b),typeof m=="number"&&(l.maximum=m,typeof b=="number"&&(b<=m?delete l.maximum:delete l.exclusiveMaximum)),typeof _=="number"&&(l.multipleOf=_);break}case"boolean":{const l=v;l.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{v.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{v.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const l=v,{minimum:d,maximum:m}=t._zod.bag;typeof d=="number"&&(l.minItems=d),typeof m=="number"&&(l.maxItems=m),l.type="array",l.items=this.process(o.element,{...f,path:[...f.path,"items"]});break}case"object":{const l=v;l.type="object",l.properties={};const d=o.shape;for(const _ in d)l.properties[_]=this.process(d[_],{...f,path:[...f.path,"properties",_]});const m=new Set(Object.keys(d)),k=new Set([...m].filter(_=>{const b=o.shape[_]._zod;return this.io==="input"?b.optin===void 0:b.optout===void 0}));k.size>0&&(l.required=Array.from(k)),o.catchall?._zod.def.type==="never"?l.additionalProperties=!1:o.catchall?o.catchall&&(l.additionalProperties=this.process(o.catchall,{...f,path:[...f.path,"additionalProperties"]})):this.io==="output"&&(l.additionalProperties=!1);break}case"union":{const l=v;l.anyOf=o.options.map((d,m)=>this.process(d,{...f,path:[...f.path,"anyOf",m]}));break}case"intersection":{const l=v,d=this.process(o.left,{...f,path:[...f.path,"allOf",0]}),m=this.process(o.right,{...f,path:[...f.path,"allOf",1]}),k=b=>"allOf"in b&&Object.keys(b).length===1,_=[...k(d)?d.allOf:[d],...k(m)?m.allOf:[m]];l.allOf=_;break}case"tuple":{const l=v;l.type="array";const d=o.items.map((_,b)=>this.process(_,{...f,path:[...f.path,"prefixItems",b]}));if(this.target==="draft-2020-12"?l.prefixItems=d:l.items=d,o.rest){const _=this.process(o.rest,{...f,path:[...f.path,"items"]});this.target==="draft-2020-12"?l.items=_:l.additionalItems=_}o.rest&&(l.items=this.process(o.rest,{...f,path:[...f.path,"items"]}));const{minimum:m,maximum:k}=t._zod.bag;typeof m=="number"&&(l.minItems=m),typeof k=="number"&&(l.maxItems=k);break}case"record":{const l=v;l.type="object",l.propertyNames=this.process(o.keyType,{...f,path:[...f.path,"propertyNames"]}),l.additionalProperties=this.process(o.valueType,{...f,path:[...f.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const l=v,d=Xt(o.entries);d.every(m=>typeof m=="number")&&(l.type="number"),d.every(m=>typeof m=="string")&&(l.type="string"),l.enum=d;break}case"literal":{const l=v,d=[];for(const m of o.values)if(m===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof m=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");d.push(Number(m))}else d.push(m);if(d.length!==0)if(d.length===1){const m=d[0];l.type=m===null?"null":typeof m,l.const=m}else d.every(m=>typeof m=="number")&&(l.type="number"),d.every(m=>typeof m=="string")&&(l.type="string"),d.every(m=>typeof m=="boolean")&&(l.type="string"),d.every(m=>m===null)&&(l.type="null"),l.enum=d;break}case"file":{const l=v,d={type:"string",format:"binary",contentEncoding:"binary"},{minimum:m,maximum:k,mime:_}=t._zod.bag;m!==void 0&&(d.minLength=m),k!==void 0&&(d.maxLength=k),_?_.length===1?(d.contentMediaType=_[0],Object.assign(l,d)):l.anyOf=_.map(b=>({...d,contentMediaType:b})):Object.assign(l,d);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const l=this.process(o.innerType,f);v.anyOf=[l,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,f),i.ref=o.innerType;break}case"success":{const l=v;l.type="boolean";break}case"default":{this.process(o.innerType,f),i.ref=o.innerType,v.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,f),i.ref=o.innerType,this.io==="input"&&(v._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,f),i.ref=o.innerType;let l;try{l=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}v.default=l;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const l=v,d=t._zod.pattern;if(!d)throw new Error("Pattern not found in template literal");l.type="string",l.pattern=d.source;break}case"pipe":{const l=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(l,f),i.ref=l;break}case"readonly":{this.process(o.innerType,f),i.ref=o.innerType,v.readOnly=!0;break}case"promise":{this.process(o.innerType,f),i.ref=o.innerType;break}case"optional":{this.process(o.innerType,f),i.ref=o.innerType;break}case"lazy":{const l=t._zod.innerType;this.process(l,f),i.ref=l;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const p=this.metadataRegistry.get(t);return p&&Object.assign(i.schema,p),this.io==="input"&&x(t)&&(delete i.schema.examples,delete i.schema.default),this.io==="input"&&i.schema._prefault&&((n=i.schema).default??(n.default=i.schema._prefault)),delete i.schema._prefault,this.seen.get(t).schema}emit(t,r){const n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},o=this.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=h=>{const f=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const d=n.external.registry.get(h[0])?.id,m=n.external.uri??(_=>_);if(d)return{ref:m(d)};const k=h[1].defId??h[1].schema.id??`schema${this.counter++}`;return h[1].defId=k,{defId:k,ref:`${m("__shared")}#/${f}/${k}`}}if(h[1]===o)return{ref:"#"};const v=`#/${f}/`,l=h[1].schema.id??`__schema${this.counter++}`;return{defId:l,ref:v+l}},a=h=>{if(h[1].schema.$ref)return;const f=h[1],{ref:y,defId:v}=s(h);f.def={...f.schema},v&&(f.defId=v);const l=f.schema;for(const d in l)delete l[d];l.$ref=y};if(n.cycles==="throw")for(const h of this.seen.entries()){const f=h[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const h of this.seen.entries()){const f=h[1];if(t===h[0]){a(h);continue}if(n.external){const v=n.external.registry.get(h[0])?.id;if(t!==h[0]&&v){a(h);continue}}if(this.metadataRegistry.get(h[0])?.id){a(h);continue}if(f.cycle){a(h);continue}if(f.count>1&&n.reused==="ref"){a(h);continue}}const i=(h,f)=>{const y=this.seen.get(h),v=y.def??y.schema,l={...v};if(y.ref===null)return;const d=y.ref;if(y.ref=null,d){i(d,f);const m=this.seen.get(d).schema;m.$ref&&f.target==="draft-7"?(v.allOf=v.allOf??[],v.allOf.push(m)):(Object.assign(v,m),Object.assign(v,l))}y.isParent||this.override({zodSchema:h,jsonSchema:v,path:y.path??[]})};for(const h of[...this.seen.entries()].reverse())i(h[0],{target:this.target});const c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),n.external?.uri){const h=n.external.registry.get(t)?.id;if(!h)throw new Error("Schema is missing an `id` property");c.$id=n.external.uri(h)}Object.assign(c,o.def);const p=n.external?.defs??{};for(const h of this.seen.entries()){const f=h[1];f.def&&f.defId&&(p[f.defId]=f.def)}n.external||Object.keys(p).length>0&&(this.target==="draft-2020-12"?c.$defs=p:c.definitions=p);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}}function Xs(e,t){if(e instanceof mr){const n=new qe(t),o={};for(const i of e._idmap.entries()){const[c,p]=i;n.process(p)}const s={},a={registry:e,uri:t?.uri,defs:o};for(const i of e._idmap.entries()){const[c,p]=i;s[c]=n.emit(p,{...t,external:a})}if(Object.keys(o).length>0){const i=n.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[i]:o}}return{schemas:s}}const r=new qe(t);return r.process(e),r.emit(e,t)}function x(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const o=e._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return x(o.element,r);case"object":{for(const s in o.shape)if(x(o.shape[s],r))return!0;return!1}case"union":{for(const s of o.options)if(x(s,r))return!0;return!1}case"intersection":return x(o.left,r)||x(o.right,r);case"tuple":{for(const s of o.items)if(x(s,r))return!0;return!!(o.rest&&x(o.rest,r))}case"record":return x(o.keyType,r)||x(o.valueType,r);case"map":return x(o.keyType,r)||x(o.valueType,r);case"set":return x(o.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return x(o.innerType,r);case"lazy":return x(o.getter(),r);case"default":return x(o.innerType,r);case"prefault":return x(o.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return x(o.in,r)||x(o.out,r);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${o.type}`)}const Qs=u("ZodISODateTime",(e,t)=>{wo.init(e,t),O.init(e,t)});function ea(e){return Ss(Qs,e)}const ta=u("ZodISODate",(e,t)=>{ko.init(e,t),O.init(e,t)});function ra(e){return Ps(ta,e)}const na=u("ZodISOTime",(e,t)=>{$o.init(e,t),O.init(e,t)});function oa(e){return Os(na,e)}const sa=u("ZodISODuration",(e,t)=>{zo.init(e,t),O.init(e,t)});function aa(e){return xs(sa,e)}const ia=(e,t)=>{tr.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>vn(e,r)},flatten:{value:r=>hn(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},de=u("ZodError",ia,{Parent:Error}),ua=gn(de),ca=yn(de),la=nr(de),gr=or(de),S=u("ZodType",(e,t)=>(E.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>M(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>ua(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>la(e,r,n),e.parseAsync=async(r,n)=>ca(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>gr(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(si(r,n)),e.superRefine=r=>e.check(ai(r)),e.overwrite=r=>e.check(X(r)),e.optional=()=>et(e),e.nullable=()=>tt(e),e.nullish=()=>et(tt(e)),e.nonoptional=r=>Ya(e,r),e.array=()=>Ra(e),e.or=r=>Da([e,r]),e.and=r=>La(e,r),e.transform=r=>rt(e,Ba(r)),e.default=r=>Ha(e,r),e.prefault=r=>qa(e,r),e.catch=r=>Qa(e,r),e.pipe=r=>rt(e,r),e.readonly=()=>ri(e),e.describe=r=>{const n=e.clone();return B.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return B.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return B.get(e);const n=e.clone();return B.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),yr=u("_ZodString",(e,t)=>{Se.init(e,t),S.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Fs(...n)),e.includes=(...n)=>e.check(Ms(...n)),e.startsWith=(...n)=>e.check(Vs(...n)),e.endsWith=(...n)=>e.check(Js(...n)),e.min=(...n)=>e.check(ce(...n)),e.max=(...n)=>e.check(hr(...n)),e.length=(...n)=>e.check(vr(...n)),e.nonempty=(...n)=>e.check(ce(1,...n)),e.lowercase=n=>e.check(Ls(n)),e.uppercase=n=>e.check(Us(n)),e.trim=()=>e.check(Ws()),e.normalize=(...n)=>e.check(Bs(...n)),e.toLowerCase=()=>e.check(Gs()),e.toUpperCase=()=>e.check(Hs())}),pa=u("ZodString",(e,t)=>{Se.init(e,t),yr.init(e,t),e.email=r=>e.check(is(fa,r)),e.url=r=>e.check(fs(da,r)),e.jwt=r=>e.check(Is(Sa,r)),e.emoji=r=>e.check(ds(ma,r)),e.guid=r=>e.check(We(Ye,r)),e.uuid=r=>e.check(us(ne,r)),e.uuidv4=r=>e.check(cs(ne,r)),e.uuidv6=r=>e.check(ls(ne,r)),e.uuidv7=r=>e.check(ps(ne,r)),e.nanoid=r=>e.check(ms(ha,r)),e.guid=r=>e.check(We(Ye,r)),e.cuid=r=>e.check(hs(va,r)),e.cuid2=r=>e.check(vs(ga,r)),e.ulid=r=>e.check(gs(ya,r)),e.base64=r=>e.check(zs(Za,r)),e.base64url=r=>e.check(Zs(Ea,r)),e.xid=r=>e.check(ys(_a,r)),e.ksuid=r=>e.check(_s(ba,r)),e.ipv4=r=>e.check(bs(wa,r)),e.ipv6=r=>e.check(ws(ka,r)),e.cidrv4=r=>e.check(ks($a,r)),e.cidrv6=r=>e.check($s(za,r)),e.e164=r=>e.check(Es(Ia,r)),e.datetime=r=>e.check(ea(r)),e.date=r=>e.check(ra(r)),e.time=r=>e.check(oa(r)),e.duration=r=>e.check(aa(r))});function Pu(e){return as(pa,e)}const O=u("ZodStringFormat",(e,t)=>{P.init(e,t),yr.init(e,t)}),fa=u("ZodEmail",(e,t)=>{po.init(e,t),O.init(e,t)}),Ye=u("ZodGUID",(e,t)=>{co.init(e,t),O.init(e,t)}),ne=u("ZodUUID",(e,t)=>{lo.init(e,t),O.init(e,t)}),da=u("ZodURL",(e,t)=>{fo.init(e,t),O.init(e,t)}),ma=u("ZodEmoji",(e,t)=>{mo.init(e,t),O.init(e,t)}),ha=u("ZodNanoID",(e,t)=>{ho.init(e,t),O.init(e,t)}),va=u("ZodCUID",(e,t)=>{vo.init(e,t),O.init(e,t)}),ga=u("ZodCUID2",(e,t)=>{go.init(e,t),O.init(e,t)}),ya=u("ZodULID",(e,t)=>{yo.init(e,t),O.init(e,t)}),_a=u("ZodXID",(e,t)=>{_o.init(e,t),O.init(e,t)}),ba=u("ZodKSUID",(e,t)=>{bo.init(e,t),O.init(e,t)}),wa=u("ZodIPv4",(e,t)=>{Zo.init(e,t),O.init(e,t)}),ka=u("ZodIPv6",(e,t)=>{Eo.init(e,t),O.init(e,t)}),$a=u("ZodCIDRv4",(e,t)=>{Io.init(e,t),O.init(e,t)}),za=u("ZodCIDRv6",(e,t)=>{So.init(e,t),O.init(e,t)}),Za=u("ZodBase64",(e,t)=>{Po.init(e,t),O.init(e,t)}),Ea=u("ZodBase64URL",(e,t)=>{xo.init(e,t),O.init(e,t)}),Ia=u("ZodE164",(e,t)=>{To.init(e,t),O.init(e,t)}),Sa=u("ZodJWT",(e,t)=>{No.init(e,t),O.init(e,t)}),_r=u("ZodNumber",(e,t)=>{fr.init(e,t),S.init(e,t),e.gt=(n,o)=>e.check(He(n,o)),e.gte=(n,o)=>e.check(ve(n,o)),e.min=(n,o)=>e.check(ve(n,o)),e.lt=(n,o)=>e.check(Ge(n,o)),e.lte=(n,o)=>e.check(he(n,o)),e.max=(n,o)=>e.check(he(n,o)),e.int=n=>e.check(Xe(n)),e.safe=n=>e.check(Xe(n)),e.positive=n=>e.check(He(0,n)),e.nonnegative=n=>e.check(ve(0,n)),e.negative=n=>e.check(Ge(0,n)),e.nonpositive=n=>e.check(he(0,n)),e.multipleOf=(n,o)=>e.check(Ke(n,o)),e.step=(n,o)=>e.check(Ke(n,o)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ou(e){return Ts(_r,e)}const Pa=u("ZodNumberFormat",(e,t)=>{jo.init(e,t),_r.init(e,t)});function Xe(e){return As(Pa,e)}const Oa=u("ZodBoolean",(e,t)=>{Ro.init(e,t),S.init(e,t)});function xu(e){return Ns(Oa,e)}const xa=u("ZodNull",(e,t)=>{Do.init(e,t),S.init(e,t)});function Tu(e){return js(xa,e)}const Ta=u("ZodAny",(e,t)=>{Co.init(e,t),S.init(e,t)});function Au(){return Rs(Ta)}const Aa=u("ZodUnknown",(e,t)=>{Fo.init(e,t),S.init(e,t)});function Qe(){return Ds(Aa)}const Na=u("ZodNever",(e,t)=>{Lo.init(e,t),S.init(e,t)});function br(e){return Cs(Na,e)}const ja=u("ZodArray",(e,t)=>{Uo.init(e,t),S.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(ce(r,n)),e.nonempty=r=>e.check(ce(1,r)),e.max=(r,n)=>e.check(hr(r,n)),e.length=(r,n)=>e.check(vr(r,n)),e.unwrap=()=>e.element});function Ra(e,t){return Ks(ja,e,t)}const wr=u("ZodObject",(e,t)=>{Mo.init(e,t),S.init(e,t),z(e,"shape",()=>t.shape),e.keyof=()=>Ma(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Qe()}),e.loose=()=>e.clone({...e._zod.def,catchall:Qe()}),e.strict=()=>e.clone({...e._zod.def,catchall:br()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>pn(e,r),e.merge=r=>fn(e,r),e.pick=r=>cn(e,r),e.omit=r=>ln(e,r),e.partial=(...r)=>dn($r,e,r[0]),e.required=(...r)=>mn(zr,e,r[0])});function Nu(e,t){const r={type:"object",get shape(){return pe(this,"shape",{...e}),this.shape},...g(t)};return new wr(r)}function ju(e,t){return new wr({type:"object",get shape(){return pe(this,"shape",{...e}),this.shape},catchall:br(),...g(t)})}const kr=u("ZodUnion",(e,t)=>{dr.init(e,t),S.init(e,t),e.options=t.options});function Da(e,t){return new kr({type:"union",options:e,...g(t)})}const Ca=u("ZodDiscriminatedUnion",(e,t)=>{kr.init(e,t),Vo.init(e,t)});function Ru(e,t,r){return new Ca({type:"union",options:t,discriminator:e,...g(r)})}const Fa=u("ZodIntersection",(e,t)=>{Jo.init(e,t),S.init(e,t)});function La(e,t){return new Fa({type:"intersection",left:e,right:t})}const Ua=u("ZodRecord",(e,t)=>{Bo.init(e,t),S.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Du(e,t,r){return new Ua({type:"record",keyType:e,valueType:t,...g(r)})}const we=u("ZodEnum",(e,t)=>{Wo.init(e,t),S.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,o)=>{const s={};for(const a of n)if(r.has(a))s[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new we({...t,checks:[],...g(o),entries:s})},e.exclude=(n,o)=>{const s={...t.entries};for(const a of n)if(r.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new we({...t,checks:[],...g(o),entries:s})}});function Ma(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new we({type:"enum",entries:r,...g(t)})}const Va=u("ZodLiteral",(e,t)=>{Go.init(e,t),S.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Cu(e,t){return new Va({type:"literal",values:Array.isArray(e)?e:[e],...g(t)})}const Ja=u("ZodTransform",(e,t)=>{Ho.init(e,t),S.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=s=>{if(typeof s=="string")r.issues.push(K(s,r.value,t));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!0),r.issues.push(K(a))}};const o=t.transform(r.value,r);return o instanceof Promise?o.then(s=>(r.value=s,r)):(r.value=o,r)}});function Ba(e){return new Ja({type:"transform",transform:e})}const $r=u("ZodOptional",(e,t)=>{Ko.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType});function et(e){return new $r({type:"optional",innerType:e})}const Wa=u("ZodNullable",(e,t)=>{qo.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tt(e){return new Wa({type:"nullable",innerType:e})}const Ga=u("ZodDefault",(e,t)=>{Yo.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ha(e,t){return new Ga({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Ka=u("ZodPrefault",(e,t)=>{Xo.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType});function qa(e,t){return new Ka({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const zr=u("ZodNonOptional",(e,t)=>{Qo.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ya(e,t){return new zr({type:"nonoptional",innerType:e,...g(t)})}const Xa=u("ZodCatch",(e,t)=>{es.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Qa(e,t){return new Xa({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const ei=u("ZodPipe",(e,t)=>{ts.init(e,t),S.init(e,t),e.in=t.in,e.out=t.out});function rt(e,t){return new ei({type:"pipe",in:e,out:t})}const ti=u("ZodReadonly",(e,t)=>{rs.init(e,t),S.init(e,t)});function ri(e){return new ti({type:"readonly",innerType:e})}const ni=u("ZodLazy",(e,t)=>{ns.init(e,t),S.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Fu(e){return new ni({type:"lazy",getter:e})}const Pe=u("ZodCustom",(e,t)=>{os.init(e,t),S.init(e,t)});function oi(e){const t=new N({check:"custom"});return t._zod.check=e,t}function Lu(e,t){return qs(Pe,e??(()=>!0),t)}function si(e,t={}){return Ys(Pe,e,t)}function ai(e){const t=oi(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(K(n,r.value,t._zod.def));else{const o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),r.issues.push(K(o))}},e(r.value,r)));return t}function Uu(e,t={error:`Input not instance of ${e.name}`}){const r=new Pe({type:"custom",check:"custom",fn:n=>n instanceof e,abort:!0,...g(t)});return r._zod.bag.Class=e,r}var Zr={};function Mu(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}async function Vu(e,t){if(e==null)return Promise.resolve();const r=t?.abortSignal;return new Promise((n,o)=>{if(r?.aborted){o(nt());return}const s=setTimeout(()=>{a(),n()},e),a=()=>{clearTimeout(s),r?.removeEventListener("abort",i)},i=()=>{a(),o(nt())};r?.addEventListener("abort",i)})}function nt(){return new DOMException("Delay was aborted","AbortError")}var Ju=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function V(e){return Object.fromEntries([...e.headers])}var ii=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const o=()=>{const s=r.length,a=new Array(t);for(let i=0;i<t;i++)a[i]=r[Math.random()*s|0];return a.join("")};if(e==null)return o;if(r.includes(n))throw new bt({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${o()}`},Bu=ii();function Wu(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function q(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var ui=["fetch failed","failed to fetch"];function Er({error:e,url:t,requestBodyValues:r}){if(q(e))return e;if(e instanceof TypeError&&ui.includes(e.message.toLowerCase())){const n=e.cause;if(n!=null)return new A({message:`Cannot connect to API: ${n.message}`,cause:n,url:t,requestBodyValues:r,isRetryable:!0})}return e}function Ir(e=globalThis){var t,r,n;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(n=(r=e.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function ci(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,n]of e)n!=null&&(t[r.toLowerCase()]=n)}return t}function Sr(e,...t){const r=new Headers(ci(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Pr="3.0.19",li=()=>globalThis.fetch,Gu=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:n,abortSignal:o,fetch:s=li()})=>{try{const a=await s(e,{method:"GET",headers:Sr(t,`ai-sdk/provider-utils/${Pr}`,Ir()),signal:o}),i=V(a);if(!a.ok){let c;try{c=await n({response:a,url:e,requestBodyValues:{}})}catch(p){throw q(p)||A.isInstance(p)?p:new A({message:"Failed to process error response",cause:p,statusCode:a.status,url:e,responseHeaders:i,requestBodyValues:{}})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:{}})}catch(c){throw c instanceof Error&&(q(c)||A.isInstance(c))?c:new A({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:i,requestBodyValues:{}})}}catch(a){throw Er({error:a,url:e,requestBodyValues:{}})}};function Hu({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([n,o])=>{const s=n.toLowerCase();return s==="*"||s==="*/*"?{mediaTypePrefix:"",regexes:o}:{mediaTypePrefix:s.replace(/\*/,""),regexes:o}}).filter(({mediaTypePrefix:n})=>e.startsWith(n)).flatMap(({regexes:n})=>n).some(n=>n.test(t))}function Ku({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if(typeof e=="string")return e;if(e!=null)throw new ee({message:`${n} API key must be a string.`});if(typeof process>"u")throw new ee({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=Zr[t],e==null)throw new ee({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new ee({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function qu({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Zr[t],!(e==null||typeof e!="string")))return e}function Yu(e){var t;const[r,n=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[n])!=null?t:n}var pi=/"__proto__"\s*:/,fi=/"constructor"\s*:/;function ot(e){const t=JSON.parse(e);return t===null||typeof t!="object"||pi.test(e)===!1&&fi.test(e)===!1?t:di(t)}function di(e){let t=[e];for(;t.length;){const r=t;t=[];for(const n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in n){const s=n[o];s&&typeof s=="object"&&t.push(s)}}}return e}function Oe(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return ot(e)}try{return ot(e)}finally{Error.stackTraceLimit=t}}var le=Symbol.for("vercel.ai.validator");function mi(e){return{[le]:!0,validate:e}}function hi(e){return typeof e=="object"&&e!==null&&le in e&&e[le]===!0&&"validate"in e}function Xu(e){let t;return()=>(t==null&&(t=e()),t)}function vi(e){return hi(e)?e:typeof e=="function"?e():gi(e)}function gi(e){return mi(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new G({value:t,cause:r.issues})}})}async function yi({value:e,schema:t}){const r=await xe({value:e,schema:t});if(!r.success)throw G.wrap({value:e,cause:r.error});return r.value}async function xe({value:e,schema:t}){const r=vi(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const n=await r.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:G.wrap({value:e,cause:n.error}),rawValue:e}}catch(n){return{success:!1,error:G.wrap({value:e,cause:n}),rawValue:e}}}async function _i({text:e,schema:t}){try{const r=Oe(e);return t==null?r:yi({value:r,schema:t})}catch(r){throw se.isInstance(r)||G.isInstance(r)?r:new se({text:e,cause:r})}}async function Or({text:e,schema:t}){try{const r=Oe(e);return t==null?{success:!0,value:r,rawValue:r}:await xe({value:r,schema:t})}catch(r){return{success:!1,error:se.isInstance(r)?r:new se({text:e,cause:r}),rawValue:void 0}}}function Qu(e){try{return Oe(e),!0}catch{return!1}}function bi({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new tn).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await Or({text:r,schema:t}))}}))}async function ec({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const n=await xe({value:t[e],schema:r});if(!n.success)throw new bt({argument:"providerOptions",message:`invalid ${e} provider options`,cause:n.error});return n.value}var wi=()=>globalThis.fetch,tc=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:s,fetch:a})=>xr({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:s,fetch:a}),rc=async({url:e,headers:t,formData:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:s,fetch:a})=>xr({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:s,fetch:a}),xr=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:s,fetch:a=wi()})=>{try{const i=await a(e,{method:"POST",headers:Sr(t,`ai-sdk/provider-utils/${Pr}`,Ir()),body:r.content,signal:s}),c=V(i);if(!i.ok){let p;try{p=await o({response:i,url:e,requestBodyValues:r.values})}catch(h){throw q(h)||A.isInstance(h)?h:new A({message:"Failed to process error response",cause:h,statusCode:i.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw p.value}try{return await n({response:i,url:e,requestBodyValues:r.values})}catch(p){throw p instanceof Error&&(q(p)||A.isInstance(p))?p:new A({message:"Failed to process successful response",cause:p,statusCode:i.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(i){throw Er({error:i,url:e,requestBodyValues:r.values})}};function nc(e){return e}function oc(e){return{...e,type:"dynamic"}}function sc({id:e,name:t,inputSchema:r,outputSchema:n}){return({execute:o,toModelOutput:s,onInputStart:a,onInputDelta:i,onInputAvailable:c,...p})=>({type:"provider-defined",id:e,name:t,args:p,inputSchema:r,outputSchema:n,execute:o,toModelOutput:s,onInputStart:a,onInputDelta:i,onInputAvailable:c})}async function ac(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ic=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:o,requestBodyValues:s})=>{const a=await n.text(),i=V(n);if(a.trim()==="")return{responseHeaders:i,value:new A({message:n.statusText,url:o,requestBodyValues:s,statusCode:n.status,responseHeaders:i,responseBody:a,isRetryable:r?.(n)})};try{const c=await _i({text:a,schema:e});return{responseHeaders:i,value:new A({message:t(c),url:o,requestBodyValues:s,statusCode:n.status,responseHeaders:i,responseBody:a,data:c,isRetryable:r?.(n,c)})}}catch{return{responseHeaders:i,value:new A({message:n.statusText,url:o,requestBodyValues:s,statusCode:n.status,responseHeaders:i,responseBody:a,isRetryable:r?.(n)})}}},uc=e=>async({response:t})=>{const r=V(t);if(t.body==null)throw new Lr({});return{responseHeaders:r,value:bi({stream:t.body,schema:e})}},cc=e=>async({response:t,url:r,requestBodyValues:n})=>{const o=await t.text(),s=await Or({text:o,schema:e}),a=V(t);if(!s.success)throw new A({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:a,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:a,value:s.value,rawValue:s.rawValue}},lc=()=>async({response:e,url:t,requestBodyValues:r})=>{const n=V(e);if(!e.body)throw new A({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0});try{const o=await e.arrayBuffer();return{responseHeaders:n,value:new Uint8Array(o)}}catch(o){throw new A({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:n,responseBody:void 0,cause:o})}};function oe(e){if(e.type==="object"){e.additionalProperties=!1;const t=e.properties;if(t!=null)for(const r in t)t[r]=oe(t[r])}return e.type==="array"&&e.items!=null&&(Array.isArray(e.items)?e.items=e.items.map(t=>oe(t)):e.items=oe(e.items)),e}var ki=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},$i=Symbol("Let zodToJsonSchema decide on which parser to use"),st={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},zi=e=>typeof e=="string"?{...st,name:e}:{...st,...e};function j(){return{}}function Zi(e,t){var r,n,o;const s={type:"array"};return(r=e.type)!=null&&r._def&&((o=(n=e.type)==null?void 0:n._def)==null?void 0:o.typeName)!==w.ZodAny&&(s.items=Z(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function Ei(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Ii(){return{type:"boolean"}}function Tr(e,t){return Z(e.type._def,t)}var Si=(e,t)=>Z(e.innerType._def,t);function Ar(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((o,s)=>Ar(e,t,o))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Pi(e)}}var Pi=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function Oi(e,t){return{...Z(e.innerType._def,t),default:e.defaultValue()}}function xi(e,t){return t.effectStrategy==="input"?Z(e.schema._def,t):j()}function Ti(e){return{type:"string",enum:Array.from(e.values)}}var Ai=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Ni(e,t){const r=[Z(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Z(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o),n=[];return r.forEach(o=>{if(Ai(o))n.push(...o.allOf);else{let s=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:a,...i}=o;s=i}n.push(s)}}),n.length?{allOf:n}:void 0}function ji(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var ge=void 0,R={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(ge===void 0&&(ge=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ge),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Nr(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":D(r,"email",n.message,t);break;case"format:idn-email":D(r,"idn-email",n.message,t);break;case"pattern:zod":T(r,R.email,n.message,t);break}break;case"url":D(r,"uri",n.message,t);break;case"uuid":D(r,"uuid",n.message,t);break;case"regex":T(r,n.regex,n.message,t);break;case"cuid":T(r,R.cuid,n.message,t);break;case"cuid2":T(r,R.cuid2,n.message,t);break;case"startsWith":T(r,RegExp(`^${ye(n.value,t)}`),n.message,t);break;case"endsWith":T(r,RegExp(`${ye(n.value,t)}$`),n.message,t);break;case"datetime":D(r,"date-time",n.message,t);break;case"date":D(r,"date",n.message,t);break;case"time":D(r,"time",n.message,t);break;case"duration":D(r,"duration",n.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{T(r,RegExp(ye(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&D(r,"ipv4",n.message,t),n.version!=="v4"&&D(r,"ipv6",n.message,t);break}case"base64url":T(r,R.base64url,n.message,t);break;case"jwt":T(r,R.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&T(r,R.ipv4Cidr,n.message,t),n.version!=="v4"&&T(r,R.ipv6Cidr,n.message,t);break}case"emoji":T(r,R.emoji(),n.message,t);break;case"ulid":{T(r,R.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{D(r,"binary",n.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{T(r,R.base64,n.message,t);break}}break}case"nanoid":T(r,R.nanoid,n.message,t)}return r}function ye(e,t){return t.patternStrategy==="escape"?Di(e):e}var Ri=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Di(e){let t="";for(let r=0;r<e.length;r++)Ri.has(e[r])||(t+="\\"),t+=e[r];return t}function D(e,t,r,n){var o;e.format||(o=e.anyOf)!=null&&o.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function T(e,t,r,n){var o;e.pattern||(o=e.allOf)!=null&&o.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:at(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=at(t,n)}function at(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},o=n.i?e.source.toLowerCase():e.source;let s="",a=!1,i=!1,c=!1;for(let p=0;p<o.length;p++){if(a){s+=o[p],a=!1;continue}if(n.i){if(i){if(o[p].match(/[a-z]/)){c?(s+=o[p],s+=`${o[p-2]}-${o[p]}`.toUpperCase(),c=!1):o[p+1]==="-"&&((r=o[p+2])!=null&&r.match(/[a-z]/))?(s+=o[p],c=!0):s+=`${o[p]}${o[p].toUpperCase()}`;continue}}else if(o[p].match(/[a-z]/)){s+=`[${o[p]}${o[p].toUpperCase()}]`;continue}}if(n.m){if(o[p]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(o[p]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&o[p]==="."){s+=i?`${o[p]}\r
`:`[${o[p]}\r
]`;continue}s+=o[p],o[p]==="\\"?a=!0:i&&o[p]==="]"?i=!1:!i&&o[p]==="["&&(i=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function jr(e,t){var r,n,o,s,a,i;const c={type:"object",additionalProperties:(r=Z(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((n=e.keyType)==null?void 0:n._def.typeName)===w.ZodString&&((o=e.keyType._def.checks)!=null&&o.length)){const{type:p,...h}=Nr(e.keyType._def,t);return{...c,propertyNames:h}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===w.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((a=e.keyType)==null?void 0:a._def.typeName)===w.ZodBranded&&e.keyType._def.type._def.typeName===w.ZodString&&((i=e.keyType._def.type._def.checks)!=null&&i.length)){const{type:p,...h}=Tr(e.keyType._def,t);return{...c,propertyNames:h}}}return c}function Ci(e,t){if(t.mapStrategy==="record")return jr(e,t);const r=Z(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||j(),n=Z(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||j();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Fi(e){const t=e.values,n=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),o=Array.from(new Set(n.map(s=>typeof s)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:n}}function Li(){return{not:j()}}function Ui(){return{type:"null"}}var ke={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Mi(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in ke&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((o,s)=>{const a=ke[s._def.typeName];return a&&!o.includes(a)?[...o,a]:o},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((o,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...o,a];case"bigint":return[...o,"integer"];case"object":if(s._def.value===null)return[...o,"null"];default:return o}},[]);if(n.length===r.length){const o=n.filter((s,a,i)=>i.indexOf(s)===a);return{type:o.length>1?o:o[0],enum:r.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,o)=>[...n,...o._def.values.filter(s=>!n.includes(s))],[])};return Vi(e,t)}var Vi=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,o)=>Z(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Ji(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[ke[e.innerType._def.typeName],"null"]};const r=Z(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Bi(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Wi(e,t){const r={type:"object",properties:{}},n=[],o=e.shape();for(const a in o){let i=o[a];if(i===void 0||i._def===void 0)continue;const c=Hi(i),p=Z(i._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});p!==void 0&&(r.properties[a]=p,c||n.push(a))}n.length&&(r.required=n);const s=Gi(e,t);return s!==void 0&&(r.additionalProperties=s),r}function Gi(e,t){if(e.catchall._def.typeName!=="ZodNever")return Z(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Hi(e){try{return e.isOptional()}catch{return!0}}var Ki=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Z(e.innerType._def,t);const n=Z(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:j()},n]}:j()},qi=(e,t)=>{if(t.pipeStrategy==="input")return Z(e.in._def,t);if(t.pipeStrategy==="output")return Z(e.out._def,t);const r=Z(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=Z(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(o=>o!==void 0)}};function Yi(e,t){return Z(e.type._def,t)}function Xi(e,t){const n={type:"array",uniqueItems:!0,items:Z(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function Qi(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>Z(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:Z(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>Z(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function eu(){return{not:j()}}function tu(){return j()}var ru=(e,t)=>Z(e.innerType._def,t),nu=(e,t,r)=>{switch(t){case w.ZodString:return Nr(e,r);case w.ZodNumber:return Bi(e);case w.ZodObject:return Wi(e,r);case w.ZodBigInt:return Ei(e);case w.ZodBoolean:return Ii();case w.ZodDate:return Ar(e,r);case w.ZodUndefined:return eu();case w.ZodNull:return Ui();case w.ZodArray:return Zi(e,r);case w.ZodUnion:case w.ZodDiscriminatedUnion:return Mi(e,r);case w.ZodIntersection:return Ni(e,r);case w.ZodTuple:return Qi(e,r);case w.ZodRecord:return jr(e,r);case w.ZodLiteral:return ji(e);case w.ZodEnum:return Ti(e);case w.ZodNativeEnum:return Fi(e);case w.ZodNullable:return Ji(e,r);case w.ZodOptional:return Ki(e,r);case w.ZodMap:return Ci(e,r);case w.ZodSet:return Xi(e,r);case w.ZodLazy:return()=>e.getter()._def;case w.ZodPromise:return Yi(e,r);case w.ZodNaN:case w.ZodNever:return Li();case w.ZodEffects:return xi(e,r);case w.ZodAny:return j();case w.ZodUnknown:return tu();case w.ZodDefault:return Oi(e,r);case w.ZodBranded:return Tr(e,r);case w.ZodReadonly:return ru(e,r);case w.ZodCatch:return Si(e,r);case w.ZodPipeline:return qi(e,r);case w.ZodFunction:case w.ZodVoid:case w.ZodSymbol:return;default:return(n=>{})()}};function Z(e,t,r=!1){var n;const o=t.seen.get(e);if(t.override){const c=(n=t.override)==null?void 0:n.call(t,e,t,o,r);if(c!==$i)return c}if(o&&!r){const c=ou(o,t);if(c!==void 0)return c}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const a=nu(e,e.typeName,t),i=typeof a=="function"?Z(a(),t):a;if(i&&su(e,t,i),t.postProcess){const c=t.postProcess(i,e,t);return s.jsonSchema=i,c}return s.jsonSchema=i,i}var ou=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ki(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),j()):t.$refStrategy==="seen"?j():void 0}},su=(e,t,r)=>(e.description&&(r.description=e.description),r),au=e=>{const t=zi(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},iu=(e,t)=>{var r;const n=au(t);let o=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((p,[h,f])=>{var y;return{...p,[h]:(y=Z(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,h]},!0))!=null?y:j()}},{}):void 0;const s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,a=(r=Z(e._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1))!=null?r:j(),i=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;i!==void 0&&(a.title=i);const c=s===void 0?o?{...a,[n.definitionPath]:o}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...o,[s]:a}};return c.$schema="http://json-schema.org/draft-07/schema#",c},uu=iu;function cu(e,t){var r;const n=(r=t?.useReferences)!=null?r:!1;return Te(()=>uu(e,{$refStrategy:n?"root":"none"}),{validate:async o=>{const s=await e.safeParseAsync(o);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function lu(e,t){var r;const n=(r=t?.useReferences)!=null?r:!1;return Te(()=>oe(Xs(e,{target:"draft-7",io:"input",reused:n?"ref":"inline"})),{validate:async o=>{const s=await gr(e,o);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function pu(e){return"_zod"in e}function fu(e,t){return pu(e)?lu(e,t):cu(e,t)}var $e=Symbol.for("vercel.ai.schema");function pc(e){let t;return()=>(t==null&&(t=e()),t)}function Te(e,{validate:t}={}){return{[$e]:!0,_type:void 0,[le]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function du(e){return typeof e=="object"&&e!==null&&$e in e&&e[$e]===!0&&"jsonSchema"in e&&"validate"in e}function fc(e){return e==null?Te({properties:{},additionalProperties:!1}):du(e)?e:typeof e=="function"?e():fu(e)}var{btoa:mu,atob:hu}=globalThis;function dc(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=hu(t);return Uint8Array.from(r,n=>n.codePointAt(0))}function vu(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return mu(t)}function mc(e){return e instanceof Uint8Array?vu(e):e}function hc(e){return e?.replace(/\/$/,"")}function gu(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*vc({execute:e,input:t,options:r}){const n=e(t,r);if(gu(n)){let o;for await(const s of n)o=s,yield{type:"preliminary",output:s};yield{type:"final",output:o}}else yield{type:"final",output:await n}}export{Or as $,A,Du as B,Ou as C,Ra as D,Qe as E,Ma as F,xu as G,Da as H,bu as I,Au as J,yi as K,Fu as L,ac as M,Gu as N,xe as O,bi as P,I as Q,ci as R,Ir as S,zu as T,Zu as U,vt as V,$u as W,Wu as X,ii as Y,_r as Z,Su as _,Sr as a,G as a0,Vu as a1,bt as a2,Uu as a3,vu as a4,fc as a5,se as a6,vc as a7,br as a8,Ju as a9,q as aa,Lu as ab,Iu as ac,Eu as ad,Hu as ae,Tu as af,ju as ag,Lr as ah,ee as ai,wu as aj,ku as ak,oc as al,Te as am,nc as an,tc as b,sc as c,Mu as d,dc as e,rc as f,Bu as g,pc as h,Qu as i,Ku as j,cc as k,qu as l,Yu as m,Xu as n,Nu as o,ec as p,uc as q,mc as r,_u as s,ic as t,lc as u,Ru as v,hc as w,Pu as x,Cu as y,fu as z};
