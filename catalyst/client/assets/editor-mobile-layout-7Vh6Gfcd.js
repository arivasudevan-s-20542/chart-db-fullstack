import{R as r,r as ct,j as m,d as dt}from"./index-DY4lwpwP.js";import{u as Se,L as De,M as Te,D as Re,S as Ee,E as Oe,a as Ce}from"./menu-CMgKE8zW.js";import{C as Ne}from"./canvas-DNr_NzL_.js";import{T as $e,D as Me,b as je,P as Pe,c as Ae,O as Ie,u as ke,S as He}from"./create-relationship-node-BYICOGVW.js";import{C as Le}from"./editor-page-DBwrEL6D.js";import{B as _e}from"./label-BRUqhX6x.js";import{c as Be}from"./spinner-CVTCfUTm.js";import"./input-BPPsHut0.js";import"./use-toast-CCsW8X7b.js";import"./textarea-WOrfQulB.js";import"./use-theme-2X7Juh3D.js";import"./theme-context-CYHh4AWr.js";import"./theme-provider-C3PqonoD.js";import"./badge-C_-_NdiN.js";import"./code-editor-CnstDFjw.js";import"./use-storage-CxHm3ldK.js";import"./logo-light-BFt8fYOX.js";import"./diagram-icon-tBo8msAN.js";import"./database-edition-CVGqoTM3.js";import"./databases-DbMVk969.js";import"./import-y0RA8y2U.js";import"./hybrid-storage-provider-DmYvaGnN.js";const Ue=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],ze=Be("menu",Ue);function Fe(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",n.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}const Vt=r.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ft=()=>{const t=r.useContext(Vt);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Fe(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const We=24,Ve=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;function Ut(...t){return(...n)=>{for(let e of t)typeof e=="function"&&e(...n)}}function Ye(){return Mt(/^Mac/)}function qe(){return Mt(/^iPhone/)}function zt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Xe(){return Mt(/^iPad/)||Ye()&&navigator.maxTouchPoints>1}function Yt(){return qe()||Xe()}function Mt(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Rt=typeof document<"u"&&window.visualViewport;function Ft(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function qt(t){for(Ft(t)&&(t=t.parentElement);t&&!Ft(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Ge=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let gt=0,Et;function Ke(t={}){let{isDisabled:n}=t;Ve(()=>{if(!n)return gt++,gt===1&&Yt()&&(Et=Je()),()=>{gt--,gt===0&&Et?.()}},[n])}function Je(){let t,n=0,e=h=>{t=qt(h.target),!(t===document.documentElement&&t===document.body)&&(n=h.changedTouches[0].pageY)},a=h=>{if(!t||t===document.documentElement||t===document.body){h.preventDefault();return}let w=h.changedTouches[0].pageY,H=t.scrollTop,z=t.scrollHeight-t.clientHeight;z!==0&&((H<=0&&w>n||H>=z&&w<n)&&h.preventDefault(),n=w)},i=h=>{let w=h.target;Nt(w)&&w!==document.activeElement&&(h.preventDefault(),w.style.transform="translateY(-2000px)",w.focus(),requestAnimationFrame(()=>{w.style.transform=""}))},o=h=>{let w=h.target;Nt(w)&&(w.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{w.style.transform="",Rt&&(Rt.height<window.innerHeight?requestAnimationFrame(()=>{Wt(w)}):Rt.addEventListener("resize",()=>Wt(w),{once:!0}))}))},g=()=>{window.scrollTo(0,0)},p=window.pageXOffset,S=window.pageYOffset,R=Ut(Qe(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let v=Ut(lt(document,"touchstart",e,{passive:!1,capture:!0}),lt(document,"touchmove",a,{passive:!1,capture:!0}),lt(document,"touchend",i,{passive:!1,capture:!0}),lt(document,"focus",o,!0),lt(window,"scroll",g));return()=>{R(),v(),window.scrollTo(p,S)}}function Qe(t,n,e){let a=t.style[n];return t.style[n]=e,()=>{t.style[n]=a}}function lt(t,n,e,a){return t.addEventListener(n,e,a),()=>{t.removeEventListener(n,e,a)}}function Wt(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let e=qt(t);if(e!==document.documentElement&&e!==document.body&&e!==t){let a=e.getBoundingClientRect().top,i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().bottom;const g=e.getBoundingClientRect().bottom+We;o>g&&(e.scrollTop+=i-a)}t=e.parentElement}}function Nt(t){return t instanceof HTMLInputElement&&!Ge.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Ze(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function tn(...t){return n=>t.forEach(e=>Ze(e,n))}function Xt(...t){return ct.useCallback(tn(...t),t)}const Gt=new WeakMap;function N(t,n,e=!1){if(!t||!(t instanceof HTMLElement))return;let a={};Object.entries(n).forEach(([i,o])=>{if(i.startsWith("--")){t.style.setProperty(i,o);return}a[i]=t.style[i],t.style[i]=o}),!e&&Gt.set(t,a)}function en(t,n){if(!t||!(t instanceof HTMLElement))return;let e=Gt.get(t);e&&(t.style[n]=e[n])}const $=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function vt(t,n){if(!t)return null;const e=window.getComputedStyle(t),a=e.transform||e.webkitTransform||e.mozTransform;let i=a.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[$(n)?13:12]):(i=a.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[$(n)?5:4]):null)}function nn(t){return 8*(Math.log(t+1)-2)}function Ot(t,n){if(!t)return()=>{};const e=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=e}}function rn(...t){return(...n)=>{for(const e of t)typeof e=="function"&&e(...n)}}const O={DURATION:.5,EASE:[.32,.72,0,1]},Kt=.4,an=.25,on=100,Jt=8,tt=16,$t=26,Ct="vaul-dragging";function Qt(t){const n=r.useRef(t);return r.useEffect(()=>{n.current=t}),r.useMemo(()=>(...e)=>n.current==null?void 0:n.current.call(n,...e),[])}function sn({defaultProp:t,onChange:n}){const e=r.useState(t),[a]=e,i=r.useRef(a),o=Qt(n);return r.useEffect(()=>{i.current!==a&&(o(a),i.current=a)},[a,i,o]),e}function Zt({prop:t,defaultProp:n,onChange:e=()=>{}}){const[a,i]=sn({defaultProp:n,onChange:e}),o=t!==void 0,g=o?t:a,p=Qt(e),S=r.useCallback(R=>{if(o){const h=typeof R=="function"?R(t):R;h!==t&&p(h)}else i(R)},[o,t,i,p]);return[g,S]}function ln({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:e,drawerRef:a,overlayRef:i,fadeFromIndex:o,onSnapPointChange:g,direction:p="bottom",container:S,snapToSequentialPoint:R}){const[v,h]=Zt({prop:t,defaultProp:e?.[0],onChange:n}),[w,H]=r.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.useEffect(()=>{function d(){H({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const z=r.useMemo(()=>v===e?.[e.length-1]||null,[e,v]),C=r.useMemo(()=>e?.findIndex(d=>d===v),[e,v]),W=e&&e.length>0&&(o||o===0)&&!Number.isNaN(o)&&e[o]===v||!e,f=r.useMemo(()=>{const d=S?{width:S.getBoundingClientRect().width,height:S.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var D;return(D=e?.map(y=>{const I=typeof y=="string";let s=0;if(I&&(s=parseInt(y,10)),$(p)){const j=I?s:w?y*d.height:0;return w?p==="bottom"?d.height-j:-d.height+j:j}const P=I?s:w?y*d.width:0;return w?p==="right"?d.width-P:-d.width+P:P}))!=null?D:[]},[e,w,S]),L=r.useMemo(()=>C!==null?f?.[C]:null,[f,C]),M=r.useCallback(d=>{var D;const y=(D=f?.findIndex(I=>I===d))!=null?D:null;g(y),N(a.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:$(p)?`translate3d(0, ${d}px, 0)`:`translate3d(${d}px, 0, 0)`}),f&&y!==f.length-1&&y!==o&&y<o?N(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"0"}):N(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),h(e?.[Math.max(y,0)])},[a.current,e,f,o,i,h]);r.useEffect(()=>{if(v||t){var d;const D=(d=e?.findIndex(y=>y===t||y===v))!=null?d:-1;f&&D!==-1&&typeof f[D]=="number"&&M(f[D])}},[v,t,e,f,M]);function c({draggedDistance:d,closeDrawer:D,velocity:y,dismissible:I}){if(o===void 0)return;const s=p==="bottom"||p==="right"?(L??0)-d:(L??0)+d,P=C===o-1,j=C===0,_=d>0;if(P&&N(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),!R&&y>2&&!_){I?D():M(f[0]);return}if(!R&&y>2&&_&&f&&e){M(f[e.length-1]);return}const B=f?.reduce((U,Q)=>typeof U!="number"||typeof Q!="number"?U:Math.abs(Q-s)<Math.abs(U-s)?Q:U),K=$(p)?window.innerHeight:window.innerWidth;if(y>Kt&&Math.abs(d)<K*.4){const U=_?1:-1;if(U>0&&z){M(f[e.length-1]);return}if(j&&U<0&&I&&D(),C===null)return;M(f[C+U]);return}M(B)}function A({draggedDistance:d}){if(L===null)return;const D=p==="bottom"||p==="right"?L-d:L+d;(p==="bottom"||p==="right")&&D<f[f.length-1]||(p==="top"||p==="left")&&D>f[f.length-1]||N(a.current,{transform:$(p)?`translate3d(0, ${D}px, 0)`:`translate3d(${D}px, 0, 0)`})}function X(d,D){if(!e||typeof C!="number"||!f||o===void 0)return null;const y=C===o-1;if(C>=o&&D)return 0;if(y&&!D)return 1;if(!W&&!y)return null;const s=y?C+1:C-1,P=y?f[s]-f[s-1]:f[s+1]-f[s],j=d/Math.abs(P);return y?1-j:j}return{isLastSnapPoint:z,activeSnapPoint:v,shouldFade:W,getPercentageDragged:X,setActiveSnapPoint:h,activeSnapPointIndex:C,onRelease:c,onDrag:A,snapPointsOffset:f}}const un=()=>()=>{};function cn(){const{direction:t,isOpen:n,shouldScaleBackground:e,setBackgroundColorOnScale:a,noBodyStyles:i}=ft(),o=r.useRef(null),g=ct.useMemo(()=>document.body.style.backgroundColor,[]);function p(){return(window.innerWidth-$t)/window.innerWidth}r.useEffect(()=>{if(n&&e){o.current&&clearTimeout(o.current);const S=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!S)return;rn(a&&!i?Ot(document.body,{background:"black"}):un,Ot(S,{transformOrigin:$(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`}));const R=Ot(S,{borderRadius:`${Jt}px`,overflow:"hidden",...$(t)?{transform:`scale(${p()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${p()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{R(),o.current=window.setTimeout(()=>{g?document.body.style.background=g:document.body.style.removeProperty("background")},O.DURATION*1e3)}}},[n,e,g])}let ut=null;function dn({isOpen:t,modal:n,nested:e,hasBeenOpened:a,preventScrollRestoration:i,noBodyStyles:o}){const[g,p]=r.useState(()=>typeof window<"u"?window.location.href:""),S=r.useRef(0),R=r.useCallback(()=>{if(zt()&&ut===null&&t&&!o){ut={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:w}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-S.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const H=w-window.innerHeight;H&&S.current>=w&&(document.body.style.top=`${-(S.current+H)}px`)}),300)}},[t]),v=r.useCallback(()=>{if(zt()&&ut!==null&&!o){const h=-parseInt(document.body.style.top,10),w=-parseInt(document.body.style.left,10);Object.assign(document.body.style,ut),window.requestAnimationFrame(()=>{if(i&&g!==window.location.href){p(window.location.href);return}window.scrollTo(w,h)}),ut=null}},[g]);return r.useEffect(()=>{function h(){S.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),r.useEffect(()=>{e||!a||(t?(!window.matchMedia("(display-mode: standalone)").matches&&R(),n||window.setTimeout(()=>{v()},500)):v())},[t,a,g,n,e,R,v]),{restorePositionSetting:v}}function fn({open:t,onOpenChange:n,children:e,onDrag:a,onRelease:i,snapPoints:o,shouldScaleBackground:g=!1,setBackgroundColorOnScale:p=!0,closeThreshold:S=an,scrollLockTimeout:R=on,dismissible:v=!0,handleOnly:h=!1,fadeFromIndex:w=o&&o.length-1,activeSnapPoint:H,setActiveSnapPoint:z,fixed:C,modal:W=!0,onClose:f,nested:L,noBodyStyles:M,direction:c="bottom",defaultOpen:A=!1,disablePreventScroll:X=!0,snapToSequentialPoint:d=!1,preventScrollRestoration:D=!1,repositionInputs:y=!0,onAnimationEnd:I,container:s,autoFocus:P=!1}){var j,_;const[B=!1,K]=Zt({defaultProp:A,prop:t,onChange:l=>{n?.(l),!l&&!L&&pe(),setTimeout(()=>{I?.(l)},O.DURATION*1e3),l&&!W&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),l||(document.body.style.pointerEvents="auto")}}),[U,Q]=r.useState(!1),[rt,yt]=r.useState(!1),[le,jt]=r.useState(!1),et=r.useRef(null),mt=r.useRef(null),bt=r.useRef(null),xt=r.useRef(null),pt=r.useRef(null),at=r.useRef(!1),St=r.useRef(null),Dt=r.useRef(0),nt=r.useRef(!1),Pt=r.useRef(0),u=r.useRef(null),At=r.useRef(((j=u.current)==null?void 0:j.getBoundingClientRect().height)||0),It=r.useRef(((_=u.current)==null?void 0:_.getBoundingClientRect().width)||0),Tt=r.useRef(0),ue=r.useCallback(l=>{o&&l===it.length-1&&(mt.current=new Date)},[]),{activeSnapPoint:ce,activeSnapPointIndex:ot,setActiveSnapPoint:kt,onRelease:de,snapPointsOffset:it,onDrag:fe,shouldFade:Ht,getPercentageDragged:me}=ln({snapPoints:o,activeSnapPointProp:H,setActiveSnapPointProp:z,drawerRef:u,fadeFromIndex:w,overlayRef:et,onSnapPointChange:ue,direction:c,container:s,snapToSequentialPoint:d});Ke({isDisabled:!B||rt||!W||le||!U||!y||!X});const{restorePositionSetting:pe}=dn({isOpen:B,modal:W,nested:L,hasBeenOpened:U,preventScrollRestoration:D,noBodyStyles:M});function ht(){return(window.innerWidth-$t)/window.innerWidth}function he(l){var b,T;!v&&!o||u.current&&!u.current.contains(l.target)||(At.current=((b=u.current)==null?void 0:b.getBoundingClientRect().height)||0,It.current=((T=u.current)==null?void 0:T.getBoundingClientRect().width)||0,yt(!0),bt.current=new Date,Yt()&&window.addEventListener("touchend",()=>at.current=!1,{once:!0}),l.target.setPointerCapture(l.pointerId),Dt.current=$(c)?l.pageY:l.pageX)}function Lt(l,b){var T,E;let x=l;const V=(T=window.getSelection())==null?void 0:T.toString(),k=u.current?vt(u.current,c):null,F=new Date;if(x.hasAttribute("data-vaul-no-drag")||x.closest("[data-vaul-no-drag]"))return!1;if(c==="right"||c==="left")return!0;if(mt.current&&F.getTime()-mt.current.getTime()<500)return!1;if(k!==null&&(c==="bottom"?k>0:k<0))return!0;if(V&&V.length>0)return!1;if(F.getTime()-((E=pt.current)==null?void 0:E.getTime())<R&&k===0||b)return pt.current=F,!1;for(;x;){if(x.scrollHeight>x.clientHeight){if(x.scrollTop!==0)return pt.current=new Date,!1;if(x.getAttribute("role")==="dialog")return!0}x=x.parentNode}return!0}function we(l){if(u.current&&rt){const b=c==="bottom"||c==="right"?1:-1,T=(Dt.current-($(c)?l.pageY:l.pageX))*b,E=T>0,x=o&&!v&&!E;if(x&&ot===0)return;const V=Math.abs(T),k=document.querySelector("[data-vaul-drawer-wrapper]"),F=c==="bottom"||c==="top"?At.current:It.current;let Y=V/F;const Z=me(V,E);if(Z!==null&&(Y=Z),x&&Y>=1||!at.current&&!Lt(l.target,E))return;if(u.current.classList.add(Ct),at.current=!0,N(u.current,{transition:"none"}),N(et.current,{transition:"none"}),o&&fe({draggedDistance:T}),E&&!o){const q=nn(T),wt=Math.min(q*-1,0)*b;N(u.current,{transform:$(c)?`translate3d(0, ${wt}px, 0)`:`translate3d(${wt}px, 0, 0)`});return}const J=1-Y;if((Ht||w&&ot===w-1)&&(a?.(l,Y),N(et.current,{opacity:`${J}`,transition:"none"},!0)),k&&et.current&&g){const q=Math.min(ht()+Y*(1-ht()),1),wt=8-Y*8,Bt=Math.max(0,14-Y*14);N(k,{borderRadius:`${wt}px`,transform:$(c)?`scale(${q}) translate3d(0, ${Bt}px, 0)`:`scale(${q}) translate3d(${Bt}px, 0, 0)`,transition:"none"},!0)}if(!o){const q=V*b;N(u.current,{transform:$(c)?`translate3d(0, ${q}px, 0)`:`translate3d(${q}px, 0, 0)`})}}}r.useEffect(()=>{var l;function b(){if(!u.current||!y)return;const T=document.activeElement;if(Nt(T)||nt.current){var E;const x=((E=window.visualViewport)==null?void 0:E.height)||0,V=window.innerHeight;let k=V-x;const F=u.current.getBoundingClientRect().height||0,Y=F>V*.8;Tt.current||(Tt.current=F);const Z=u.current.getBoundingClientRect().top;if(Math.abs(Pt.current-k)>60&&(nt.current=!nt.current),o&&o.length>0&&it&&ot){const J=it[ot]||0;k+=J}if(Pt.current=k,F>x||nt.current){const J=u.current.getBoundingClientRect().height;let q=J;J>x&&(q=x-(Y?Z:$t)),C?u.current.style.height=`${J-Math.max(k,0)}px`:u.current.style.height=`${Math.max(q,x-Z)}px`}else u.current.style.height=`${Tt.current}px`;o&&o.length>0&&!nt.current?u.current.style.bottom="0px":u.current.style.bottom=`${Math.max(k,0)}px`}}return(l=window.visualViewport)==null||l.addEventListener("resize",b),()=>{var T;return(T=window.visualViewport)==null?void 0:T.removeEventListener("resize",b)}},[ot,o,it]);function st(l){ge(),f?.(),l||K(!1),setTimeout(()=>{o&&kt(o[0])},O.DURATION*1e3)}function _t(){if(!u.current)return;const l=document.querySelector("[data-vaul-drawer-wrapper]"),b=vt(u.current,c);N(u.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),N(et.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),g&&b&&b>0&&B&&N(l,{borderRadius:`${Jt}px`,overflow:"hidden",...$(c)?{transform:`scale(${ht()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${ht()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`},!0)}function ge(){!rt||!u.current||(u.current.classList.remove(Ct),at.current=!1,yt(!1),xt.current=new Date)}function ve(l){if(!rt||!u.current)return;u.current.classList.remove(Ct),at.current=!1,yt(!1),xt.current=new Date;const b=vt(u.current,c);if(!Lt(l.target,!1)||!b||Number.isNaN(b)||bt.current===null)return;const T=xt.current.getTime()-bt.current.getTime(),E=Dt.current-($(c)?l.pageY:l.pageX),x=Math.abs(E)/T;if(x>.05&&(jt(!0),setTimeout(()=>{jt(!1)},200)),o){de({draggedDistance:E*(c==="bottom"||c==="right"?1:-1),closeDrawer:st,velocity:x,dismissible:v}),i?.(l,!0);return}if(c==="bottom"||c==="right"?E>0:E<0){_t(),i?.(l,!0);return}if(x>Kt){st(),i?.(l,!1);return}var V;const k=Math.min((V=u.current.getBoundingClientRect().height)!=null?V:0,window.innerHeight);var F;const Y=Math.min((F=u.current.getBoundingClientRect().width)!=null?F:0,window.innerWidth),Z=c==="left"||c==="right";if(Math.abs(b)>=(Z?Y:k)*S){st(),i?.(l,!1);return}i?.(l,!0),_t()}r.useEffect(()=>(B&&(N(document.documentElement,{scrollBehavior:"auto"}),mt.current=new Date),()=>{en(document.documentElement,"scrollBehavior")}),[B]);function ye(l){const b=l?(window.innerWidth-tt)/window.innerWidth:1,T=l?-tt:0;St.current&&window.clearTimeout(St.current),N(u.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:`scale(${b}) translate3d(0, ${T}px, 0)`}),!l&&u.current&&(St.current=setTimeout(()=>{const E=vt(u.current,c);N(u.current,{transition:"none",transform:$(c)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})},500))}function be(l,b){if(b<0)return;const T=(window.innerWidth-tt)/window.innerWidth,E=T+b*(1-T),x=-tt+b*tt;N(u.current,{transform:$(c)?`scale(${E}) translate3d(0, ${x}px, 0)`:`scale(${E}) translate3d(${x}px, 0, 0)`,transition:"none"})}function xe(l,b){const T=$(c)?window.innerHeight:window.innerWidth,E=b?(T-tt)/T:1,x=b?-tt:0;b&&N(u.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:$(c)?`scale(${E}) translate3d(0, ${x}px, 0)`:`scale(${E}) translate3d(${x}px, 0, 0)`})}return r.createElement(je,{defaultOpen:A,onOpenChange:l=>{!v&&!l||(l?Q(!0):st(!0),K(l))},open:B},r.createElement(Vt.Provider,{value:{activeSnapPoint:ce,snapPoints:o,setActiveSnapPoint:kt,drawerRef:u,overlayRef:et,onOpenChange:n,onPress:he,onRelease:ve,onDrag:we,dismissible:v,handleOnly:h,isOpen:B,isDragging:rt,shouldFade:Ht,closeDrawer:st,onNestedDrag:be,onNestedOpenChange:ye,onNestedRelease:xe,keyboardIsOpen:nt,modal:W,snapPointsOffset:it,direction:c,shouldScaleBackground:g,setBackgroundColorOnScale:p,noBodyStyles:M,container:s,autoFocus:P}},e))}const te=r.forwardRef(function({...t},n){const{overlayRef:e,snapPoints:a,onRelease:i,shouldFade:o,isOpen:g,modal:p}=ft(),S=Xt(n,e),R=a&&a.length>0;return p?r.createElement(Ie,{onMouseUp:i,ref:S,"data-vaul-overlay":"","data-vaul-snap-points":g&&R?"true":"false","data-vaul-snap-points-overlay":g&&o?"true":"false",...t}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});te.displayName="Drawer.Overlay";const ee=r.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:e,...a},i){const{drawerRef:o,onPress:g,onRelease:p,onDrag:S,keyboardIsOpen:R,snapPointsOffset:v,modal:h,isOpen:w,direction:H,snapPoints:z,container:C,handleOnly:W,autoFocus:f}=ft(),[L,M]=r.useState(!1),c=Xt(i,o),A=r.useRef(null),X=r.useRef(null),d=r.useRef(!1),D=z&&z.length>0;cn();const y=(s,P,j=0)=>{if(d.current)return!0;const _=Math.abs(s.y),B=Math.abs(s.x),K=B>_,U=["bottom","right"].includes(P)?1:-1;if(P==="left"||P==="right"){if(!(s.x*U<0)&&B>=0&&B<=j)return K}else if(!(s.y*U<0)&&_>=0&&_<=j)return!K;return d.current=!0,!0};r.useEffect(()=>{D&&window.requestAnimationFrame(()=>{M(!0)})},[]);function I(s){A.current=null,d.current=!1,p(s)}return r.createElement(Ae,{"data-vaul-drawer-direction":H,"data-vaul-drawer":"","data-vaul-delayed-snap-points":L?"true":"false","data-vaul-snap-points":w&&D?"true":"false","data-vaul-custom-container":C?"true":"false",...a,ref:c,style:v&&v.length>0?{"--snap-point-height":`${v[0]}px`,...n}:n,onPointerDown:s=>{W||(a.onPointerDown==null||a.onPointerDown.call(a,s),A.current={x:s.pageX,y:s.pageY},g(s))},onOpenAutoFocus:s=>{e?.(s),f||s.preventDefault()},onPointerDownOutside:s=>{if(t?.(s),!h||s.defaultPrevented){s.preventDefault();return}R.current&&(R.current=!1)},onFocusOutside:s=>{if(!h){s.preventDefault();return}},onPointerMove:s=>{if(X.current=s,W||(a.onPointerMove==null||a.onPointerMove.call(a,s),!A.current))return;const P=s.pageY-A.current.y,j=s.pageX-A.current.x,_=s.pointerType==="touch"?10:2;y({x:j,y:P},H,_)?S(s):(Math.abs(j)>_||Math.abs(P)>_)&&(A.current=null)},onPointerUp:s=>{a.onPointerUp==null||a.onPointerUp.call(a,s),A.current=null,d.current=!1,p(s)},onPointerOut:s=>{a.onPointerOut==null||a.onPointerOut.call(a,s),I(X.current)},onContextMenu:s=>{a.onContextMenu==null||a.onContextMenu.call(a,s),I(X.current)}})});ee.displayName="Drawer.Content";const mn=250,pn=120,hn=r.forwardRef(function({preventCycle:t=!1,children:n,...e},a){const{closeDrawer:i,isDragging:o,snapPoints:g,activeSnapPoint:p,setActiveSnapPoint:S,dismissible:R,handleOnly:v,isOpen:h,onPress:w,onDrag:H}=ft(),z=r.useRef(null),C=r.useRef(!1);function W(){if(C.current){M();return}window.setTimeout(()=>{f()},pn)}function f(){if(o||t||C.current){M();return}if(M(),(!g||g.length===0)&&R){i();return}if(p===g[g.length-1]&&R){i();return}const A=g.findIndex(d=>d===p);if(A===-1)return;const X=g[A+1];S(X)}function L(){z.current=window.setTimeout(()=>{C.current=!0},mn)}function M(){window.clearTimeout(z.current),C.current=!1}return r.createElement("div",{onClick:W,onPointerCancel:M,onPointerDown:c=>{v&&w(c),L()},onPointerMove:c=>{v&&H(c)},ref:a,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...e},r.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});hn.displayName="Drawer.Handle";function wn(t){const n=ft(),{container:e=n.container,...a}=t;return r.createElement(Pe,{container:e,...a})}const G={Root:fn,Content:ee,Overlay:te,Portal:wn,Title:$e,Description:Me},ne=({shouldScaleBackground:t=!0,...n})=>m.jsx(G.Root,{shouldScaleBackground:t,...n});ne.displayName="Drawer";const gn=G.Portal,re=r.forwardRef(({className:t,...n},e)=>m.jsx(G.Overlay,{ref:e,className:dt("fixed inset-0 z-50 bg-black/80",t),...n}));re.displayName=G.Overlay.displayName;const ae=r.forwardRef(({className:t,children:n,fullScreen:e,...a},i)=>m.jsxs(gn,{children:[e?null:m.jsx(re,{}),m.jsxs(G.Content,{ref:i,className:dt("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...a,children:[m.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));ae.displayName="DrawerContent";const oe=({className:t,...n})=>m.jsx("div",{className:dt("grid gap-1.5 p-4 text-center sm:text-left",t),...n});oe.displayName="DrawerHeader";const ie=r.forwardRef(({className:t,...n},e)=>m.jsx(G.Title,{ref:e,className:dt("text-lg font-semibold leading-none tracking-tight",t),...n}));ie.displayName=G.Title.displayName;const se=r.forwardRef(({className:t,...n},e)=>m.jsx(G.Description,{ref:e,className:dt("text-sm text-muted-foreground",t),...n}));se.displayName=G.Description.displayName;const vn=()=>{const t=ct.useCallback(()=>m.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=small&text=false",width:"25",height:"20",title:"GitHub"}),[]),{toggleSidebar:n}=Se();return m.jsxs("nav",{className:"flex flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[m.jsxs("div",{className:"flex flex-1 flex-col justify-between gap-x-1 md:flex-row md:justify-normal",children:[m.jsxs("div",{className:"flex items-center justify-between pt-[8px] font-primary md:py-[10px]",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(_e,{size:"icon",variant:"ghost",onClick:n,children:m.jsx(ze,{className:"size-5"})}),m.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:m.jsx("img",{src:Le,alt:"chartDB",className:"h-4 max-w-fit"})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[t(),m.jsx(De,{})]})]}),m.jsx(Te,{})]}),m.jsx("div",{className:"flex flex-1 justify-center pb-2 pt-1",children:m.jsx(Re,{})})]})},Un=({initialDiagram:t})=>{const{isSidePanelShowed:n,hideSidePanel:e}=ke();return m.jsx(m.Fragment,{children:m.jsxs(Ee,{defaultOpen:!1,open:!1,className:"flex-col",children:[m.jsx(Oe,{}),m.jsx(vn,{}),m.jsx(ne,{open:n,onClose:()=>e(),children:m.jsxs(ae,{className:"h-full",fullScreen:!0,children:[m.jsxs(oe,{children:[m.jsx(ie,{children:"Manage Diagram"}),m.jsx(se,{children:"Manage your diagram objects"})]}),m.jsx(He,{orientation:"horizontal"}),m.jsx(Ce,{"data-vaul-no-drag":!0})]})}),m.jsx(Ne,{initialTables:t?.tables??[]})]})})};export{Un as EditorMobileLayout,Un as default};
