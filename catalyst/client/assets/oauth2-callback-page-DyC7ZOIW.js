import{u as g,b as p,a as h,r as n,j as e,D as u}from"./index-DY4lwpwP.js";import{S as f}from"./spinner-CVTCfUTm.js";import{D as m}from"./diagram-icon-tBo8msAN.js";import"./database-edition-CVGqoTM3.js";import"./databases-DbMVk969.js";const C=()=>{const s=g(),[t]=p(),{setAuthTokens:o}=h(),[i,r]=n.useState(null),[x,c]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const a=t.get("access_token"),l=t.get("refresh_token"),d=t.get("error");if(d){r(decodeURIComponent(d)),c(!1);return}if(!a||!l){r("Missing authentication tokens"),c(!1);return}await o(a,l),s("/",{replace:!0})}catch(a){r(a.message||"Failed to process authentication"),c(!1)}})()},[t,o,s]),i?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 rounded-lg border bg-card p-8 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(m,{databaseType:u.GENERIC}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-destructive",children:"Authentication Failed"})]}),e.jsx("div",{className:"rounded-md bg-destructive/10 p-4 text-sm text-destructive",children:i}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>s("/login"),className:"w-full rounded-md bg-primary px-4 py-2 text-primary-foreground hover:bg-primary/90",children:"Back to Login"}),e.jsx("button",{onClick:()=>s("/"),className:"w-full rounded-md border px-4 py-2 hover:bg-accent",children:"Continue as Guest"})]})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(m,{databaseType:u.GENERIC}),e.jsx(f,{className:"size-8"}),e.jsx("p",{className:"text-muted-foreground",children:x?"Completing sign in...":"Redirecting..."})]})})};export{C as OAuth2CallbackPage,C as default};
