import{r as l,j as e,d as i,i as g,u,f as b,H as N,T as v,c as y,e as w}from"./index-DY4lwpwP.js";import{C as B,a as D}from"./logo-light-BFt8fYOX.js";import{u as C}from"./use-theme-2X7Juh3D.js";import{L as T,T as $}from"./theme-provider-C3PqonoD.js";import{S as k,B as L}from"./label-BRUqhX6x.js";import{C as S,R,S as m,a as _}from"./create-relationship-node-BYICOGVW.js";import{c as P,S as H}from"./spinner-CVTCfUTm.js";import{d as M,a as z}from"./databases-DbMVk969.js";import{H as o,L as F,B as I}from"./badge-C_-_NdiN.js";import{C as E}from"./canvas-DNr_NzL_.js";import"./theme-context-CYHh4AWr.js";import"./use-storage-CxHm3ldK.js";import"./database-edition-CVGqoTM3.js";import"./use-toast-CCsW8X7b.js";import"./input-BPPsHut0.js";import"./import-y0RA8y2U.js";const U=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],A=P("cloud-download",U),h=l.forwardRef(({...s},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...s}));h.displayName="Breadcrumb";const p=l.forwardRef(({className:s,...t},r)=>e.jsx("ol",{ref:r,className:i("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...t}));p.displayName="BreadcrumbList";const c=l.forwardRef(({className:s,...t},r)=>e.jsx("li",{ref:r,className:i("inline-flex items-center gap-1.5",s),...t}));c.displayName="BreadcrumbItem";const d=l.forwardRef(({asChild:s,className:t,...r},a)=>{const n=s?k:"a";return e.jsx(n,{ref:a,className:i("transition-colors hover:text-foreground",t),...r})});d.displayName="BreadcrumbLink";const G=l.forwardRef(({className:s,...t},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:i("font-normal text-foreground",s),...t}));G.displayName="BreadcrumbPage";const f=({children:s,className:t,...r})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:i("[&>svg]:w-3.5 [&>svg]:h-3.5",t),...r,children:s??e.jsx(S,{})});f.displayName="BreadcrumbSeparator";const O=()=>{const{templateSlug:s}=g(),t=u(),a=b().template;l.useEffect(()=>{a||t("/templates")},[a,t]);const{effectiveTheme:n}=C(),j=l.useCallback(async()=>{t(`/templates/clone/${s}`)},[t,s]);return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("link",{rel:"canonical",href:`https://chartdb.io/templates/${s}`}),e.jsx("title",{children:`Database schema diagram for - ${a.name} | ChartDB`}),e.jsx("meta",{name:"description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{property:"og:title",content:`Database schema diagram for - ${a.name} | ChartDB`}),e.jsx("meta",{property:"og:url",content:`${o}/templates/${s}`}),e.jsx("meta",{property:"og:description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{property:"og:image",content:`${o}${a.image}`}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:site_name",content:"ChartDB"}),e.jsx("meta",{name:"twitter:title",content:`Database schema for - ${a.name} | ChartDB`}),e.jsx("meta",{name:"twitter:description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{name:"twitter:image",content:`${o}${a.image}`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:site",content:"@ChartDB_io"}),e.jsx("meta",{name:"twitter:creator",content:"@ChartDB_io"})]}):e.jsx("title",{children:"Database Schema Diagram | ChartDB"})}),e.jsxs("section",{className:"flex h-screen w-screen flex-col bg-background",children:[e.jsxs("nav",{className:"flex h-12 shrink-0 flex-row items-center justify-between border-b px-4",children:[e.jsx("div",{className:"flex flex-1 justify-start gap-x-3",children:e.jsx("div",{className:"flex items-center font-primary",children:e.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:e.jsx("img",{src:n==="light"?B:D,alt:"chartDB",className:"h-4 max-w-fit"})})})}),e.jsx("div",{className:"flex flex-1 justify-end",children:e.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=large&text=false",width:"40",height:"30",title:"GitHub"})})]}),a?e.jsxs("div",{className:"flex flex-1 flex-col p-3 pb-5 text-center md:px-28 md:text-left",children:[e.jsx(h,{className:"mb-2",children:e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(d,{href:"/templates",children:"Templates"})}),e.jsx(f,{}),e.jsx(c,{children:e.jsx(d,{href:`/templates/${s}`,children:s})})]})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 md:flex-row md:items-start md:justify-between md:gap-0",children:[e.jsxs("div",{className:"flex flex-col pr-0 md:pr-20",children:[e.jsxs("h1",{className:"flex flex-col font-primary text-2xl font-bold",children:[a?.name,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Database schema diagram"})]}),e.jsxs("h2",{className:"mt-3",children:[e.jsxs("span",{className:"font-semibold",children:[a?.shortDescription,": "]}),a?.description]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(L,{onClick:j,children:[e.jsx(A,{className:"mr-2",size:"16"}),"Clone Template"]})})]}),e.jsx(m,{className:"my-5"}),e.jsxs("div",{className:"flex w-full flex-1 flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"relative top-0 flex h-fit w-full shrink-0 flex-col gap-4 md:sticky md:top-1 md:w-60",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Metadata"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("div",{className:"inline-flex",children:[e.jsx("span",{className:"mr-2",children:"Database:"}),e.jsxs(v,{children:[e.jsx(y,{asChild:!0,children:e.jsx("img",{src:M[a.diagram.databaseType],className:"h-5 max-w-fit",alt:"database"})}),e.jsx(w,{children:z[a.diagram.databaseType]})]})]})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{children:"Tables:"}),e.jsx("span",{className:"ml-2 font-semibold",children:a?.diagram?.tables?.length??0})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{children:"Relationships:"}),e.jsx("span",{className:"ml-2 font-semibold",children:a?.diagram?.relationships?.length??0})]})]}),e.jsx(m,{}),a.url?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Url"}),e.jsx(F,{className:"break-all text-sm text-muted-foreground",href:`${a.url}?ref=chartdb`,target:"_blank",children:a.url})]}),e.jsx(m,{})]}):null,e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1 md:justify-start",children:a.tags.map(x=>e.jsx(I,{variant:"outline",children:x},`${a.slug}_${x}`))})]})]}),e.jsx("div",{className:"flex min-h-96 overflow-hidden rounded border md:flex-1 md:rounded-lg",children:e.jsx("div",{className:"size-full",children:e.jsx(_,{diagram:a.diagram,readonly:!0,children:e.jsx(E,{initialTables:a.diagram.tables??[]})})})})]})]}):e.jsx(H,{size:"large",className:"mt-20 text-pink-600"})]})]})},ne=()=>e.jsx(T,{children:e.jsx($,{children:e.jsx(R,{children:e.jsx(O,{})})})});export{ne as TemplatePage};
